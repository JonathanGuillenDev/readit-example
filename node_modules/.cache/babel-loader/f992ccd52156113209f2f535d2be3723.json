{"remainingRequest":"C:\\Users\\terme\\Documents\\GitHub\\readit-example\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\terme\\Documents\\GitHub\\readit-example\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\terme\\Documents\\GitHub\\readit-example\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\terme\\Documents\\GitHub\\readit-example\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\terme\\Documents\\GitHub\\readit-example\\src\\components\\CreateMessage.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\terme\\Documents\\GitHub\\readit-example\\src\\components\\CreateMessage.vue","mtime":1752853470946},{"path":"C:\\Users\\terme\\Documents\\GitHub\\readit-example\\babel.config.js","mtime":1752807206615},{"path":"C:\\Users\\terme\\Documents\\GitHub\\readit-example\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1752810157864},{"path":"C:\\Users\\terme\\Documents\\GitHub\\readit-example\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1752810157864},{"path":"C:\\Users\\terme\\Documents\\GitHub\\readit-example\\node_modules\\babel-loader\\lib\\index.js","mtime":1752810158351},{"path":"C:\\Users\\terme\\Documents\\GitHub\\readit-example\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1752810157864},{"path":"C:\\Users\\terme\\Documents\\GitHub\\readit-example\\node_modules\\vue-loader\\lib\\index.js","mtime":1752810158306}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7Ci8vIFJFTU9WRSBUSElTIElNUE9SVCAtIE5vIGxvbmdlciB1c2luZyBleHRlcm5hbCBzZXJ2aWNlCi8vIGltcG9ydCBtZXNzYWdlU2VydmljZSBmcm9tICJAL3NlcnZpY2VzL01lc3NhZ2VTZXJ2aWNlLmpzIjsKCmltcG9ydCB7IG1hcEFjdGlvbnMgfSBmcm9tICd2dWV4JzsgLy8gSW1wb3J0IG1hcEFjdGlvbnMKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiY3JlYXRlLW1lc3NhZ2UiLAogIHByb3BzOiB7CiAgICAvLyBFbnN1cmUgdG9waWNJZCBpcyBwYXNzZWQgYXMgYSBwcm9wIGZyb20geW91ciByb3V0ZXIgY29uZmlnCiAgICB0b3BpY0lkOiBbTnVtYmVyLCBTdHJpbmddCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbWVzc2FnZTogewogICAgICAgIC8vIElEIHdpbGwgYmUgZ2VuZXJhdGVkIGJ5IHRoZSBhZGRNZXNzYWdlIGFjdGlvbiBpbiB0aGUgc3RvcmUsCiAgICAgICAgLy8gb3IgeW91IGNhbiBnZW5lcmF0ZSBpdCBoZXJlOgogICAgICAgIGlkOiB0aGlzLmdlbmVyYXRlVW5pcXVlSWQoKSwKICAgICAgICAvLyBVc2UgYSBtZXRob2QgdG8gZ2VuZXJhdGUgSUQKICAgICAgICB0b3BpY0lkOiB0aGlzLnRvcGljSWQsCiAgICAgICAgLy8gVGhpcyBwcm9wIHNob3VsZCBiZSBjb3JyZWN0bHkgcGFzc2VkIGZyb20gdGhlIHJvdXRlcgogICAgICAgIHRpdGxlOiAiIiwKICAgICAgICBtZXNzYWdlVGV4dDogIiIKICAgICAgfQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIE1hcCB0aGUgYWN0aW9uIHRvIGFkZCBhIG5ldyBtZXNzYWdlCiAgICAuLi5tYXBBY3Rpb25zKFsnYWRkTWVzc2FnZSddKSwKICAgIC8vIFRoaXMgYWN0aW9uIGlzIGFscmVhZHkgZGVmaW5lZCBpbiB5b3VyIHN0b3JlCgogICAgZ2VuZXJhdGVVbmlxdWVJZCgpIHsKICAgICAgLy8gQSBzaW1wbGUgbWV0aG9kIGZvciB1bmlxdWUgSURzIGluIGEgc3RhdGljIGNvbnRleHQuCiAgICAgIC8vIEluIGEgcmVhbCBhcHAsIElEcyB3b3VsZCBjb21lIGZyb20gdGhlIGRhdGFiYXNlLgogICAgICByZXR1cm4gRGF0ZS5ub3coKSArIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMDApOwogICAgfSwKICAgIHNhdmVNZXNzYWdlKCkgewogICAgICBpZiAoIXRoaXMubWVzc2FnZS50aXRsZS50cmltKCkgfHwgIXRoaXMubWVzc2FnZS5tZXNzYWdlVGV4dC50cmltKCkpIHsKICAgICAgICAvLyBCYXNpYyB2YWxpZGF0aW9uCiAgICAgICAgYWxlcnQoJ01lc3NhZ2UgdGl0bGUgYW5kIHRleHQgY2Fubm90IGJlIGVtcHR5LicpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgLy8gRW5zdXJlIHRvcGljSWQgaXMgc2V0IGJlZm9yZSBzYXZpbmcKICAgICAgdGhpcy5tZXNzYWdlLnRvcGljSWQgPSB0aGlzLnRvcGljSWQ7CgogICAgICAvLyBEaXNwYXRjaCB0aGUgVnVleCBhY3Rpb24gdG8gYWRkIHRoZSBuZXcgbWVzc2FnZSB0byB0aGUgc3RvcmUKICAgICAgdGhpcy5hZGRNZXNzYWdlKHRoaXMubWVzc2FnZSkudGhlbigoKSA9PiB7CiAgICAgICAgLy8gQWZ0ZXIgc3VjY2Vzc2Z1bCBhZGRpdGlvbiwgcmVkaXJlY3QgdG8gdGhlIG1lc3NhZ2VzIGZvciB0aGlzIHRvcGljCiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgbmFtZTogIk1lc3NhZ2VzIiwKICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICB0b3BpY0lkOiB0aGlzLnRvcGljSWQKICAgICAgICAgIH0KICAgICAgICB9KTsgLy8gVXNlIHRvcGljSWQKICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICAgIGNvbnNvbGUuZXJyb3IoIkVycm9yIGFkZGluZyBtZXNzYWdlOiIsIGVycm9yKTsKICAgICAgICAvLyBIYW5kbGUgZXJyb3IsIGUuZy4sIHNob3cgYW4gYWxlcnQKICAgICAgfSk7CiAgICB9LAogICAgY2FuY2VsKCkgewogICAgICAvLyBHbyBiYWNrIHRvIHRoZSBwcmV2aW91cyBwYWdlICh0b3BpYyBkZXRhaWxzKQogICAgICB0aGlzLiRyb3V0ZXIuYmFjaygpOwogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIC8vIElmIHRvcGljSWQgY2FuIGNoYW5nZSB3aGlsZSBjb21wb25lbnQgaXMgbW91bnRlZCAoZS5nLiwgZHluYW1pYyByb3V0ZSBjaGFuZ2VzKQogICAgLy8gZW5zdXJlIG1lc3NhZ2UudG9waWNJZCBpcyB1cGRhdGVkLiBOb3Qgc3RyaWN0bHkgbmVjZXNzYXJ5IGlmIGNvbXBvbmVudCByZW1vdW50cy4KICAgIHRvcGljSWQobmV3VG9waWNJZCkgewogICAgICB0aGlzLm1lc3NhZ2UudG9waWNJZCA9IG5ld1RvcGljSWQ7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["mapActions","name","props","topicId","Number","String","data","message","id","generateUniqueId","title","messageText","methods","Date","now","Math","floor","random","saveMessage","trim","alert","addMessage","then","$router","push","params","catch","error","console","cancel","back","watch","newTopicId"],"sources":["src/components/CreateMessage.vue"],"sourcesContent":["<template>\r\n  <form @submit.prevent=\"saveMessage\"> <!-- Use @submit.prevent on the form -->\r\n    <div class=\"field\">\r\n      <label for=\"title\">Title</label>\r\n      <input type=\"text\" id=\"title\" v-model=\"message.title\" /> <!-- Added ID for accessibility -->\r\n    </div>\r\n    <div class=\"field\">\r\n      <label for=\"messageText\">Message</label>\r\n      <textarea id=\"messageText\" v-model=\"message.messageText\"></textarea> <!-- Changed to textarea for multiline messages -->\r\n    </div>\r\n    <div class=\"actions\">\r\n      <button type=\"submit\">Save Message</button>\r\n      <button type=\"button\" @click=\"cancel\">Cancel</button> <!-- Added a cancel button -->\r\n    </div>\r\n  </form>\r\n</template>\r\n\r\n<script>\r\n// REMOVE THIS IMPORT - No longer using external service\r\n// import messageService from \"@/services/MessageService.js\";\r\n\r\nimport { mapActions } from 'vuex'; // Import mapActions\r\n\r\nexport default {\r\n  name: \"create-message\",\r\n  props: {\r\n    // Ensure topicId is passed as a prop from your router config\r\n    topicId: [Number, String]\r\n  },\r\n  data() {\r\n    return {\r\n      message: {\r\n        // ID will be generated by the addMessage action in the store,\r\n        // or you can generate it here:\r\n        id: this.generateUniqueId(), // Use a method to generate ID\r\n        topicId: this.topicId, // This prop should be correctly passed from the router\r\n        title: \"\",\r\n        messageText: \"\"\r\n      }\r\n    };\r\n  },\r\n  methods: {\r\n    // Map the action to add a new message\r\n    ...mapActions(['addMessage']), // This action is already defined in your store\r\n\r\n    generateUniqueId() {\r\n      // A simple method for unique IDs in a static context.\r\n      // In a real app, IDs would come from the database.\r\n      return Date.now() + Math.floor(Math.random() * 1000);\r\n    },\r\n    saveMessage() {\r\n      if (!this.message.title.trim() || !this.message.messageText.trim()) { // Basic validation\r\n        alert('Message title and text cannot be empty.');\r\n        return;\r\n      }\r\n\r\n      // Ensure topicId is set before saving\r\n      this.message.topicId = this.topicId;\r\n\r\n      // Dispatch the Vuex action to add the new message to the store\r\n      this.addMessage(this.message)\r\n        .then(() => {\r\n          // After successful addition, redirect to the messages for this topic\r\n          this.$router.push({ name: \"Messages\", params: { topicId: this.topicId } }); // Use topicId\r\n        })\r\n        .catch(error => {\r\n          console.error(\"Error adding message:\", error);\r\n          // Handle error, e.g., show an alert\r\n        });\r\n    },\r\n    cancel() {\r\n      // Go back to the previous page (topic details)\r\n      this.$router.back();\r\n    }\r\n  },\r\n  watch: {\r\n    // If topicId can change while component is mounted (e.g., dynamic route changes)\r\n    // ensure message.topicId is updated. Not strictly necessary if component remounts.\r\n    topicId(newTopicId) {\r\n      this.message.topicId = newTopicId;\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n/* Add some basic styles for the form, consistent with other forms */\r\nform {\r\n  margin-top: 20px;\r\n  padding: 20px;\r\n  background: rgba(255, 255, 255, 0.2);\r\n  border-radius: 10px;\r\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.field {\r\n  margin-bottom: 15px;\r\n}\r\n\r\n.field label {\r\n  display: block;\r\n  margin-bottom: 5px;\r\n  font-weight: bold;\r\n  color: #333;\r\n}\r\n\r\n.field input[type=\"text\"],\r\n.field textarea { /* Added textarea style */\r\n  width: 100%;\r\n  padding: 10px;\r\n  border: 1px solid rgba(0, 0, 0, 0.2);\r\n  border-radius: 5px;\r\n  background: rgba(255, 255, 255, 0.8);\r\n  box-sizing: border-box;\r\n}\r\n\r\n.field textarea {\r\n  min-height: 100px; /* Give textarea a default height */\r\n  resize: vertical; /* Allow vertical resizing */\r\n}\r\n\r\n.actions {\r\n  text-align: right;\r\n  margin-top: 20px;\r\n}\r\n\r\n.actions button {\r\n  padding: 10px 20px;\r\n  border: none;\r\n  border-radius: 5px;\r\n  cursor: pointer;\r\n  font-size: 16px;\r\n  margin-left: 10px;\r\n}\r\n\r\n.actions button[type=\"submit\"] {\r\n  background-color: #28a745; /* Green for save */\r\n  color: white;\r\n}\r\n\r\n.actions button[type=\"submit\"]:hover {\r\n  background-color: #218838;\r\n}\r\n\r\n.actions button[type=\"button\"] { /* For the Cancel button */\r\n  background-color: #6c757d; /* Gray */\r\n  color: white;\r\n}\r\n\r\n.actions button[type=\"button\"]:hover {\r\n  background-color: #5a6268;\r\n}\r\n</style>"],"mappings":";AAkBA;AACA;;AAEA,SAAAA,UAAA;;AAEA;EACAC,IAAA;EACAC,KAAA;IACA;IACAC,OAAA,GAAAC,MAAA,EAAAC,MAAA;EACA;EACAC,KAAA;IACA;MACAC,OAAA;QACA;QACA;QACAC,EAAA,OAAAC,gBAAA;QAAA;QACAN,OAAA,OAAAA,OAAA;QAAA;QACAO,KAAA;QACAC,WAAA;MACA;IACA;EACA;EACAC,OAAA;IACA;IACA,GAAAZ,UAAA;IAAA;;IAEAS,iBAAA;MACA;MACA;MACA,OAAAI,IAAA,CAAAC,GAAA,KAAAC,IAAA,CAAAC,KAAA,CAAAD,IAAA,CAAAE,MAAA;IACA;IACAC,YAAA;MACA,UAAAX,OAAA,CAAAG,KAAA,CAAAS,IAAA,YAAAZ,OAAA,CAAAI,WAAA,CAAAQ,IAAA;QAAA;QACAC,KAAA;QACA;MACA;;MAEA;MACA,KAAAb,OAAA,CAAAJ,OAAA,QAAAA,OAAA;;MAEA;MACA,KAAAkB,UAAA,MAAAd,OAAA,EACAe,IAAA;QACA;QACA,KAAAC,OAAA,CAAAC,IAAA;UAAAvB,IAAA;UAAAwB,MAAA;YAAAtB,OAAA,OAAAA;UAAA;QAAA;MACA,GACAuB,KAAA,CAAAC,KAAA;QACAC,OAAA,CAAAD,KAAA,0BAAAA,KAAA;QACA;MACA;IACA;IACAE,OAAA;MACA;MACA,KAAAN,OAAA,CAAAO,IAAA;IACA;EACA;EACAC,KAAA;IACA;IACA;IACA5B,QAAA6B,UAAA;MACA,KAAAzB,OAAA,CAAAJ,OAAA,GAAA6B,UAAA;IACA;EACA;AACA","ignoreList":[]}]}