{"remainingRequest":"C:\\Users\\terme\\Documents\\GitHub\\readit-example\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\terme\\Documents\\GitHub\\readit-example\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\terme\\Documents\\GitHub\\readit-example\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\terme\\Documents\\GitHub\\readit-example\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\terme\\Documents\\GitHub\\readit-example\\src\\components\\TopicDetails.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\terme\\Documents\\GitHub\\readit-example\\src\\components\\TopicDetails.vue","mtime":1752852888760},{"path":"C:\\Users\\terme\\Documents\\GitHub\\readit-example\\babel.config.js","mtime":1752807206615},{"path":"C:\\Users\\terme\\Documents\\GitHub\\readit-example\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1752810157864},{"path":"C:\\Users\\terme\\Documents\\GitHub\\readit-example\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1752810157864},{"path":"C:\\Users\\terme\\Documents\\GitHub\\readit-example\\node_modules\\babel-loader\\lib\\index.js","mtime":1752810158351},{"path":"C:\\Users\\terme\\Documents\\GitHub\\readit-example\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1752810157864},{"path":"C:\\Users\\terme\\Documents\\GitHub\\readit-example\\node_modules\\vue-loader\\lib\\index.js","mtime":1752810158306}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuaXRlcmF0b3IuY29uc3RydWN0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5pdGVyYXRvci5maW5kLmpzIjsKLy8gUkVNT1ZFIFRIRVNFIElNUE9SVFMgLSBXZSBhcmUgbm8gbG9uZ2VyIHVzaW5nIGV4dGVybmFsIHNlcnZpY2VzIGZvciBkYXRhCi8vIGltcG9ydCB0b3BpY1NlcnZpY2UgZnJvbSAiQC9zZXJ2aWNlcy9Ub3BpY1NlcnZpY2UuanMiOwovLyBpbXBvcnQgbWVzc2FnZVNlcnZpY2UgZnJvbSAiQC9zZXJ2aWNlcy9NZXNzYWdlU2VydmljZS5qcyI7CgppbXBvcnQgeyBtYXBTdGF0ZSwgbWFwQWN0aW9ucyB9IGZyb20gJ3Z1ZXgnOyAvLyBJbXBvcnQgbWFwU3RhdGUgYW5kIG1hcEFjdGlvbnMKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAidG9waWMtZGV0YWlscyIsCiAgcHJvcHM6IHsKICAgIC8vIEVuc3VyZSB0aGF0IHRvcGljSWQgaXMgcGFzc2VkIGFzIGEgcHJvcCBmcm9tIHlvdXIgcm91dGVyIGNvbmZpZwogICAgdG9waWNJZDogW051bWJlciwgU3RyaW5nXSAvLyBBbGxvdyBzdHJpbmcgZm9yIHJvdXRlIHBhcmFtcywgY29udmVydCBpZiBuZWVkZWQKICB9LAogIGNvbXB1dGVkOiB7CiAgICAvLyBNYXAgc3RhdGUgcHJvcGVydGllcyBmb3IgZGlyZWN0IGFjY2VzcyBpbiB0ZW1wbGF0ZSBhbmQgc2NyaXB0CiAgICAuLi5tYXBTdGF0ZShbJ2FjdGl2ZVRvcGljJywgJ3RvcGljcyddKSAvLyBOZWVkICd0b3BpY3MnIHRvIGZpbmQgdGhlIHRvcGljIGJ5IElECiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyBNYXAgYWN0aW9ucyB0byBiZSBkaXNwYXRjaGVkCiAgICAuLi5tYXBBY3Rpb25zKFsnc2VsZWN0VG9waWMnLCAnZGVsZXRlTWVzc2FnZSddKSwKICAgIC8vICdzZWxlY3RUb3BpYycgaXMgY3J1Y2lhbCBmb3IgaW5pdGlhbCBsb2FkCgogICAgY29uZmlybUFuZERlbGV0ZU1lc3NhZ2UoaWQpIHsKICAgICAgaWYgKGNvbmZpcm0oIkFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgdGhpcyBtZXNzYWdlPyIpKSB7CiAgICAgICAgLy8gRGlzcGF0Y2ggdGhlIGRlbGV0ZU1lc3NhZ2UgYWN0aW9uIGZyb20gdGhlIHN0b3JlCiAgICAgICAgdGhpcy5kZWxldGVNZXNzYWdlKGlkKTsKICAgICAgfQogICAgfQogIH0sCiAgLy8gVXNlIGEgd2F0Y2hlciB0byByZWFjdCB0byBjaGFuZ2VzIGluIHRvcGljSWQgZnJvbSB0aGUgcm91dGUKICAvLyBhbmQgYWxzbyB0byBoYW5kbGUgdGhlIGluaXRpYWwgbG9hZC4KICB3YXRjaDogewogICAgdG9waWNJZDogewogICAgICBpbW1lZGlhdGU6IHRydWUsCiAgICAgIC8vIFRoaXMgbWFrZXMgdGhlIHdhdGNoZXIgcnVuIGltbWVkaWF0ZWx5IHdoZW4gdGhlIGNvbXBvbmVudCBpcyBjcmVhdGVkCiAgICAgIGhhbmRsZXIobmV3VG9waWNJZCkgewogICAgICAgIGlmIChuZXdUb3BpY0lkICYmIHRoaXMudG9waWNzLmxlbmd0aCA+IDApIHsKICAgICAgICAgIC8vIEVuc3VyZSB0b3BpY3MgYXJlIGxvYWRlZCBiZWZvcmUgc2VhcmNoaW5nCiAgICAgICAgICBjb25zdCB0b3BpY1RvU2VsZWN0ID0gdGhpcy50b3BpY3MuZmluZCh0ID0+IHQuaWQgPT0gbmV3VG9waWNJZCk7IC8vIFVzZSA9PSBmb3IgbG9vc2UgY29tcGFyaXNvbiBhcyByb3V0ZSBwYXJhbSBtaWdodCBiZSBzdHJpbmcKCiAgICAgICAgICBpZiAodG9waWNUb1NlbGVjdCkgewogICAgICAgICAgICAvLyBEaXNwYXRjaCB0aGUgc2VsZWN0VG9waWMgYWN0aW9uLCB3aGljaCB3aWxsIHVwZGF0ZSBhY3RpdmVUb3BpYyBhbmQgaXRzIG1lc3NhZ2VzCiAgICAgICAgICAgIHRoaXMuc2VsZWN0VG9waWModG9waWNUb1NlbGVjdCk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjb25zb2xlLndhcm4oYFRvcGljIHdpdGggSUQgJHtuZXdUb3BpY0lkfSBub3QgZm91bmQgaW4gc3RvcmUuYCk7CiAgICAgICAgICAgIC8vIE9wdGlvbmFsOiBSZWRpcmVjdCB0byBhIDQwNCBwYWdlIG9yIGhvbWUgaWYgdG9waWMgbm90IGZvdW5kCiAgICAgICAgICAgIC8vIHRoaXMuJHJvdXRlci5wdXNoKCIvbm90LWZvdW5kIik7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgLy8gQWRkIGEgd2F0Y2hlciBmb3IgJ3RvcGljcycgc3RhdGUgYXMgd2VsbC4gVGhpcyBoYW5kbGVzIGNhc2VzIHdoZXJlICd0b3BpY3MnIG1pZ2h0CiAgICAvLyBiZSBwb3B1bGF0ZWQgc2xpZ2h0bHkgYWZ0ZXIgJ3RvcGljSWQnIGlzIGF2YWlsYWJsZSAoZS5nLiwgaWYgaW5pdGlhbERhdGEgbG9hZCBpcyBkZWxheWVkLCB0aG91Z2ggdW5saWtlbHkgZm9yIHN0YXRpYyBKU09OKQogICAgdG9waWNzOiB7CiAgICAgIGltbWVkaWF0ZTogdHJ1ZSwKICAgICAgaGFuZGxlcihuZXdUb3BpY3MpIHsKICAgICAgICBpZiAobmV3VG9waWNzLmxlbmd0aCA+IDAgJiYgdGhpcy50b3BpY0lkKSB7CiAgICAgICAgICBjb25zdCB0b3BpY1RvU2VsZWN0ID0gbmV3VG9waWNzLmZpbmQodCA9PiB0LmlkID09IHRoaXMudG9waWNJZCk7CiAgICAgICAgICAvLyBPbmx5IHNlbGVjdCBpZiBpdCdzIGEgZGlmZmVyZW50IHRvcGljIHRoYW4gY3VycmVudGx5IGFjdGl2ZSB0byBhdm9pZCB1bm5lY2Vzc2FyeSByZS1yZW5kZXJzCiAgICAgICAgICBpZiAodG9waWNUb1NlbGVjdCAmJiB0aGlzLmFjdGl2ZVRvcGljLmlkICE9PSB0b3BpY1RvU2VsZWN0LmlkKSB7CiAgICAgICAgICAgIHRoaXMuc2VsZWN0VG9waWModG9waWNUb1NlbGVjdCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["mapState","mapActions","name","props","topicId","Number","String","computed","methods","confirmAndDeleteMessage","id","confirm","deleteMessage","watch","immediate","handler","newTopicId","topics","length","topicToSelect","find","t","selectTopic","console","warn","newTopics","activeTopic"],"sources":["src/components/TopicDetails.vue"],"sourcesContent":["<template>\r\n  <div class=\"topic-details\">\r\n    <h1>{{ activeTopic.title }}</h1>\r\n    <router-link\r\n      :to=\"{ name: 'AddMessage', params: { topicId: activeTopic.id } }\"\r\n      class=\"addMessage\"\r\n    >Add New Message</router-link>\r\n\r\n    <div\r\n      v-for=\"message in activeTopic.messages\"\r\n      v-bind:key=\"message.id\"\r\n      class=\"topic-message bubble\"\r\n    >\r\n      <h3 class=\"message-title\">{{ message.title }}</h3>\r\n      <p class=\"message-body\">{{ message.messageText }}</p>\r\n      <router-link\r\n        :to=\"{ name: 'EditMessage', params: { topicId: activeTopic.id, messageId: message.id } }\"\r\n        tag=\"button\"\r\n        class=\"btnEditMessage\"\r\n      >Edit</router-link>\r\n      <button class=\"btnDeleteMessage\" @click=\"confirmAndDeleteMessage(message.id)\">Delete</button>\r\n    </div>\r\n\r\n    <div v-if=\"!activeTopic.id\">\r\n      <p>Loading topic or topic not found...</p>\r\n    </div>\r\n    <div v-else-if=\"activeTopic.messages && activeTopic.messages.length === 0\">\r\n      <p>No messages for this topic yet. Be the first to add one!</p>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// REMOVE THESE IMPORTS - We are no longer using external services for data\r\n// import topicService from \"@/services/TopicService.js\";\r\n// import messageService from \"@/services/MessageService.js\";\r\n\r\nimport { mapState, mapActions } from 'vuex'; // Import mapState and mapActions\r\n\r\nexport default {\r\n  name: \"topic-details\",\r\n  props: {\r\n    // Ensure that topicId is passed as a prop from your router config\r\n    topicId: [Number, String] // Allow string for route params, convert if needed\r\n  },\r\n  computed: {\r\n    // Map state properties for direct access in template and script\r\n    ...mapState(['activeTopic', 'topics']) // Need 'topics' to find the topic by ID\r\n  },\r\n  methods: {\r\n    // Map actions to be dispatched\r\n    ...mapActions(['selectTopic', 'deleteMessage']), // 'selectTopic' is crucial for initial load\r\n\r\n    confirmAndDeleteMessage(id) {\r\n      if (confirm(\"Are you sure you want to delete this message?\")) {\r\n        // Dispatch the deleteMessage action from the store\r\n        this.deleteMessage(id);\r\n      }\r\n    }\r\n  },\r\n  // Use a watcher to react to changes in topicId from the route\r\n  // and also to handle the initial load.\r\n  watch: {\r\n    topicId: {\r\n      immediate: true, // This makes the watcher run immediately when the component is created\r\n      handler(newTopicId) {\r\n        if (newTopicId && this.topics.length > 0) { // Ensure topics are loaded before searching\r\n          const topicToSelect = this.topics.find(t => t.id == newTopicId); // Use == for loose comparison as route param might be string\r\n\r\n          if (topicToSelect) {\r\n            // Dispatch the selectTopic action, which will update activeTopic and its messages\r\n            this.selectTopic(topicToSelect);\r\n          } else {\r\n            console.warn(`Topic with ID ${newTopicId} not found in store.`);\r\n            // Optional: Redirect to a 404 page or home if topic not found\r\n            // this.$router.push(\"/not-found\");\r\n          }\r\n        }\r\n      }\r\n    },\r\n    // Add a watcher for 'topics' state as well. This handles cases where 'topics' might\r\n    // be populated slightly after 'topicId' is available (e.g., if initialData load is delayed, though unlikely for static JSON)\r\n    topics: {\r\n      immediate: true,\r\n      handler(newTopics) {\r\n        if (newTopics.length > 0 && this.topicId) {\r\n          const topicToSelect = newTopics.find(t => t.id == this.topicId);\r\n          // Only select if it's a different topic than currently active to avoid unnecessary re-renders\r\n          if (topicToSelect && this.activeTopic.id !== topicToSelect.id) {\r\n             this.selectTopic(topicToSelect);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n/* Your existing styles (no changes needed here) */\r\n/** page structure **/\r\n.topic-details {\r\n  padding: 20px 20px;\r\n  margin: 0 auto;\r\n  max-width: 600px;\r\n}\r\n\r\n/** ios1-ios6 bubbles **/\r\n.topic-details .bubble {\r\n  box-sizing: border-box;\r\n  width: auto;\r\n  position: relative;\r\n  clear: both;\r\n\r\n  background: #95c2fd;\r\n  background-image: -webkit-gradient(\r\n    linear,\r\n    left bottom,\r\n    left top,\r\n    color-stop(0.15, #bee2ff),\r\n    color-stop(1, #95c2fd)\r\n  );\r\n  background-image: -webkit-linear-gradient(bottom, #bee2ff 15%, #95c2fd 100%);\r\n  background-image: -moz-linear-gradient(bottom, #bee2ff 15%, #95c2fd 100%);\r\n  background-image: -ms-linear-gradient(bottom, #bee2ff 15%, #95c2fd 100%);\r\n  background-image: -o-linear-gradient(bottom, #bee2ff 15%, #95c2fd 100%);\r\n  background-image: linear-gradient(to top, #bee2ff 15%, #95c2fd 100%);\r\n  filter: progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr='#95c2fd', endColorstr='#bee2ff');\r\n\r\n  border: solid 1px rgba(0, 0, 0, 0.5);\r\n  -webkit-border-radius: 20px;\r\n  -moz-border-radius: 20px;\r\n  border-radius: 20px;\r\n\r\n  -webkit-box-shadow: inset 0 8px 5px rgba(255, 255, 255, 0.65),\r\n    0 1px 2px rgba(0, 0, 0, 0.2);\r\n  -moz-box-shadow: inset 0 8px 5px rgba(255, 255, 255, 0.65),\r\n    0 1px 2px rgba(0, 0, 0, 0.2);\r\n  box-shadow: inset 0 8px 5px rgba(255, 255, 255, 0.65),\r\n    0 1px 2px rgba(0, 0, 0, 0.2);\r\n  margin-bottom: 20px;\r\n  padding: 6px 20px;\r\n  color: #000;\r\n  text-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);\r\n  word-wrap: break-word;\r\n}\r\n\r\n.addMessage {\r\n  display: block;\r\n  padding: 0 0 10px 10px;\r\n}\r\na.addMessage:link,\r\na.addMessage:visited {\r\n  color: blue;\r\n  text-decoration: none;\r\n}\r\na.addMessage:hover {\r\n  text-decoration: underline;\r\n}\r\n</style>"],"mappings":";;AAiCA;AACA;AACA;;AAEA,SAAAA,QAAA,EAAAC,UAAA;;AAEA;EACAC,IAAA;EACAC,KAAA;IACA;IACAC,OAAA,GAAAC,MAAA,EAAAC,MAAA;EACA;EACAC,QAAA;IACA;IACA,GAAAP,QAAA;EACA;EACAQ,OAAA;IACA;IACA,GAAAP,UAAA;IAAA;;IAEAQ,wBAAAC,EAAA;MACA,IAAAC,OAAA;QACA;QACA,KAAAC,aAAA,CAAAF,EAAA;MACA;IACA;EACA;EACA;EACA;EACAG,KAAA;IACAT,OAAA;MACAU,SAAA;MAAA;MACAC,QAAAC,UAAA;QACA,IAAAA,UAAA,SAAAC,MAAA,CAAAC,MAAA;UAAA;UACA,MAAAC,aAAA,QAAAF,MAAA,CAAAG,IAAA,CAAAC,CAAA,IAAAA,CAAA,CAAAX,EAAA,IAAAM,UAAA;;UAEA,IAAAG,aAAA;YACA;YACA,KAAAG,WAAA,CAAAH,aAAA;UACA;YACAI,OAAA,CAAAC,IAAA,kBAAAR,UAAA;YACA;YACA;UACA;QACA;MACA;IACA;IACA;IACA;IACAC,MAAA;MACAH,SAAA;MACAC,QAAAU,SAAA;QACA,IAAAA,SAAA,CAAAP,MAAA,aAAAd,OAAA;UACA,MAAAe,aAAA,GAAAM,SAAA,CAAAL,IAAA,CAAAC,CAAA,IAAAA,CAAA,CAAAX,EAAA,SAAAN,OAAA;UACA;UACA,IAAAe,aAAA,SAAAO,WAAA,CAAAhB,EAAA,KAAAS,aAAA,CAAAT,EAAA;YACA,KAAAY,WAAA,CAAAH,aAAA;UACA;QACA;MACA;IACA;EACA;AACA","ignoreList":[]}]}