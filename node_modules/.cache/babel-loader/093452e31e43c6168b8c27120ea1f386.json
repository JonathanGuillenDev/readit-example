{"remainingRequest":"C:\\Users\\terme\\Documents\\GitHub\\readit-example\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\terme\\Documents\\GitHub\\readit-example\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\terme\\Documents\\GitHub\\readit-example\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\terme\\Documents\\GitHub\\readit-example\\src\\components\\UpdateMessage.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\terme\\Documents\\GitHub\\readit-example\\src\\components\\UpdateMessage.vue","mtime":1752853314768},{"path":"C:\\Users\\terme\\Documents\\GitHub\\readit-example\\babel.config.js","mtime":1752807206615},{"path":"C:\\Users\\terme\\Documents\\GitHub\\readit-example\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1752810157864},{"path":"C:\\Users\\terme\\Documents\\GitHub\\readit-example\\node_modules\\babel-loader\\lib\\index.js","mtime":1752810158351},{"path":"C:\\Users\\terme\\Documents\\GitHub\\readit-example\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1752810157864},{"path":"C:\\Users\\terme\\Documents\\GitHub\\readit-example\\node_modules\\vue-loader\\lib\\index.js","mtime":1752810158306}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLml0ZXJhdG9yLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuaXRlcmF0b3IuZmluZC5qcyI7Ci8vIFJFTU9WRSBUSElTIElNUE9SVCAtIE5vIGxvbmdlciB1c2luZyBleHRlcm5hbCBzZXJ2aWNlCi8vIGltcG9ydCBtZXNzYWdlU2VydmljZSBmcm9tICIuLi9zZXJ2aWNlcy9NZXNzYWdlU2VydmljZSI7CgppbXBvcnQgeyBtYXBTdGF0ZSwgbWFwQWN0aW9ucyB9IGZyb20gJ3Z1ZXgnOyAvLyBJbXBvcnQgbWFwU3RhdGUgYW5kIG1hcEFjdGlvbnMKCmV4cG9ydCBkZWZhdWx0IHsKICAvLyBSZW5hbWVkIGZvciBjbGFyaXR5LCByZWZsZWN0aW5nIGl0cyBwdXJwb3NlIGFzIGFuIGVkaXQgY29tcG9uZW50CiAgbmFtZTogImVkaXQtbWVzc2FnZSIsCiAgcHJvcHM6IHsKICAgIC8vIFRoZXNlIHByb3BzIGFyZSBwYXNzZWQgZnJvbSB0aGUgcm91dGVyIGJhc2VkIG9uIHlvdXIgLzp0b3BpY0lkL2VkaXQtbWVzc2FnZS86bWVzc2FnZUlkIHJvdXRlCiAgICB0b3BpY0lkOiBbTnVtYmVyLCBTdHJpbmddLAogICAgbWVzc2FnZUlkOiBbTnVtYmVyLCBTdHJpbmddCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdGl0bGU6ICIiLAogICAgICBtZXNzYWdlVGV4dDogIiIKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgLy8gTmVlZCBhY2Nlc3MgdG8gYWxsTWVzc2FnZXMgdG8gZmluZCB0aGUgc3BlY2lmaWMgbWVzc2FnZSB0byBlZGl0CiAgICAuLi5tYXBTdGF0ZShbJ2FsbE1lc3NhZ2VzJ10pCiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyBNYXAgdGhlIGFjdGlvbiB0byB1cGRhdGUgYSBtZXNzYWdlCiAgICAuLi5tYXBBY3Rpb25zKFsndXBkYXRlVGhlTWVzc2FnZSddKSwKICAgIC8vIFlvdSdsbCBuZWVkIHRvIGNyZWF0ZSB0aGlzIGFjdGlvbiBhbmQgbXV0YXRpb24gaW4geW91ciBzdG9yZQoKICAgIHVwZGF0ZU1lc3NhZ2UoKSB7CiAgICAgIGNvbnN0IHVwZGF0ZWRNZXNzYWdlID0gewogICAgICAgIGlkOiB0aGlzLm1lc3NhZ2VJZCwKICAgICAgICB0b3BpY0lkOiB0aGlzLnRvcGljSWQsCiAgICAgICAgdGl0bGU6IHRoaXMudGl0bGUsCiAgICAgICAgbWVzc2FnZVRleHQ6IHRoaXMubWVzc2FnZVRleHQKICAgICAgfTsKCiAgICAgIC8vIERpc3BhdGNoIHRoZSBWdWV4IGFjdGlvbiB0byB1cGRhdGUgdGhlIG1lc3NhZ2UgaW4gdGhlIHN0b3JlCiAgICAgIHRoaXMudXBkYXRlVGhlTWVzc2FnZSh1cGRhdGVkTWVzc2FnZSkudGhlbigoKSA9PiB7CiAgICAgICAgLy8gQWZ0ZXIgc3VjY2Vzc2Z1bCB1cGRhdGUsIHJlZGlyZWN0IHRvIHRoZSBtZXNzYWdlcyBmb3IgdGhpcyB0b3BpYwogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgIG5hbWU6ICJNZXNzYWdlcyIsCiAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgdG9waWNJZDogdGhpcy50b3BpY0lkCiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0pLmNhdGNoKGVycm9yID0+IHsKICAgICAgICBjb25zb2xlLmVycm9yKCJFcnJvciB1cGRhdGluZyBtZXNzYWdlOiIsIGVycm9yKTsKICAgICAgICAvLyBIYW5kbGUgZXJyb3IsIGUuZy4sIHNob3cgYW4gYWxlcnQKICAgICAgfSk7CiAgICB9LAogICAgY2FuY2VsKCkgewogICAgICAvLyBHbyBiYWNrIHRvIHRoZSBwcmV2aW91cyBwYWdlICh0b3BpYyBkZXRhaWxzKQogICAgICB0aGlzLiRyb3V0ZXIuYmFjaygpOwogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIC8vIFdhdGNoICdtZXNzYWdlSWQnIHRvIGxvYWQgdGhlIG1lc3NhZ2UgZGV0YWlscyB3aGVuIHRoZSBjb21wb25lbnQgaXMgY3JlYXRlZCBvciBtZXNzYWdlSWQgY2hhbmdlcwogICAgbWVzc2FnZUlkOiB7CiAgICAgIGltbWVkaWF0ZTogdHJ1ZSwKICAgICAgLy8gVGhpcyBtYWtlcyB0aGUgd2F0Y2hlciBydW4gaW1tZWRpYXRlbHkgd2hlbiB0aGUgY29tcG9uZW50IGlzIGNyZWF0ZWQKICAgICAgaGFuZGxlcihuZXdNZXNzYWdlSWQpIHsKICAgICAgICBpZiAobmV3TWVzc2FnZUlkICYmIHRoaXMuYWxsTWVzc2FnZXMubGVuZ3RoID4gMCkgewogICAgICAgICAgLy8gRW5zdXJlIGFsbE1lc3NhZ2VzIGFyZSBsb2FkZWQKICAgICAgICAgIGNvbnN0IG1lc3NhZ2VUb0VkaXQgPSB0aGlzLmFsbE1lc3NhZ2VzLmZpbmQobXNnID0+IG1zZy5pZCA9PSBuZXdNZXNzYWdlSWQpOwogICAgICAgICAgaWYgKG1lc3NhZ2VUb0VkaXQpIHsKICAgICAgICAgICAgdGhpcy50aXRsZSA9IG1lc3NhZ2VUb0VkaXQudGl0bGU7CiAgICAgICAgICAgIHRoaXMubWVzc2FnZVRleHQgPSBtZXNzYWdlVG9FZGl0Lm1lc3NhZ2VUZXh0OwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY29uc29sZS53YXJuKGBNZXNzYWdlIHdpdGggSUQgJHtuZXdNZXNzYWdlSWR9IG5vdCBmb3VuZCBpbiBzdG9yZS5gKTsKICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi9ub3QtZm91bmQiKTsgLy8gUmVkaXJlY3QgaWYgbWVzc2FnZSBub3QgZm91bmQKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICAvLyBXYXRjaCAnYWxsTWVzc2FnZXMnIGFzIGEgZmFsbGJhY2ssIGluIGNhc2UgdGhlIG1lc3NhZ2VzIGFycmF5IGxvYWRzIGFmdGVyIHRoZSBjb21wb25lbnQKICAgIGFsbE1lc3NhZ2VzOiB7CiAgICAgIGltbWVkaWF0ZTogdHJ1ZSwKICAgICAgaGFuZGxlcihuZXdNZXNzYWdlcykgewogICAgICAgIGlmIChuZXdNZXNzYWdlcy5sZW5ndGggPiAwICYmIHRoaXMubWVzc2FnZUlkICYmICghdGhpcy50aXRsZSB8fCAhdGhpcy5tZXNzYWdlVGV4dCkpIHsKICAgICAgICAgIGNvbnN0IG1lc3NhZ2VUb0VkaXQgPSBuZXdNZXNzYWdlcy5maW5kKG1zZyA9PiBtc2cuaWQgPT0gdGhpcy5tZXNzYWdlSWQpOwogICAgICAgICAgaWYgKG1lc3NhZ2VUb0VkaXQpIHsKICAgICAgICAgICAgdGhpcy50aXRsZSA9IG1lc3NhZ2VUb0VkaXQudGl0bGU7CiAgICAgICAgICAgIHRoaXMubWVzc2FnZVRleHQgPSBtZXNzYWdlVG9FZGl0Lm1lc3NhZ2VUZXh0OwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQogIH0KfTs="},{"version":3,"names":["mapState","mapActions","name","props","topicId","Number","String","messageId","data","title","messageText","computed","methods","updateMessage","updatedMessage","id","updateTheMessage","then","$router","push","params","catch","error","console","cancel","back","watch","immediate","handler","newMessageId","allMessages","length","messageToEdit","find","msg","warn","newMessages"],"sources":["src/components/UpdateMessage.vue"],"sourcesContent":["<template>\r\n  <form @submit.prevent=\"updateMessage\"> <div class=\"field\">\r\n      <label for=\"title\">Title</label>\r\n      <input id=\"title\" type=\"text\" v-model=\"title\" /> </div>\r\n    <div class=\"field\">\r\n      <label for=\"messageText\">Message</label>\r\n      <textarea id=\"messageText\" v-model=\"messageText\"></textarea> </div>\r\n    <div class=\"actions\">\r\n      <button type=\"submit\">Update Message</button>\r\n      <button type=\"button\" @click=\"cancel\">Cancel</button> </div>\r\n  </form>\r\n</template>\r\n\r\n<script>\r\n// REMOVE THIS IMPORT - No longer using external service\r\n// import messageService from \"../services/MessageService\";\r\n\r\nimport { mapState, mapActions } from 'vuex'; // Import mapState and mapActions\r\n\r\nexport default {\r\n  // Renamed for clarity, reflecting its purpose as an edit component\r\n  name: \"edit-message\",\r\n  props: {\r\n    // These props are passed from the router based on your /:topicId/edit-message/:messageId route\r\n    topicId: [Number, String],\r\n    messageId: [Number, String]\r\n  },\r\n  data() {\r\n    return {\r\n      title: \"\",\r\n      messageText: \"\"\r\n    };\r\n  },\r\n  computed: {\r\n    // Need access to allMessages to find the specific message to edit\r\n    ...mapState(['allMessages'])\r\n  },\r\n  methods: {\r\n    // Map the action to update a message\r\n    ...mapActions(['updateTheMessage']), // You'll need to create this action and mutation in your store\r\n\r\n    updateMessage() {\r\n      const updatedMessage = {\r\n        id: this.messageId,\r\n        topicId: this.topicId,\r\n        title: this.title,\r\n        messageText: this.messageText\r\n      };\r\n\r\n      // Dispatch the Vuex action to update the message in the store\r\n      this.updateTheMessage(updatedMessage)\r\n        .then(() => {\r\n          // After successful update, redirect to the messages for this topic\r\n          this.$router.push({ name: \"Messages\", params: { topicId: this.topicId } });\r\n        })\r\n        .catch(error => {\r\n          console.error(\"Error updating message:\", error);\r\n          // Handle error, e.g., show an alert\r\n        });\r\n    },\r\n    cancel() {\r\n      // Go back to the previous page (topic details)\r\n      this.$router.back();\r\n    }\r\n  },\r\n  watch: {\r\n    // Watch 'messageId' to load the message details when the component is created or messageId changes\r\n    messageId: {\r\n      immediate: true, // This makes the watcher run immediately when the component is created\r\n      handler(newMessageId) {\r\n        if (newMessageId && this.allMessages.length > 0) { // Ensure allMessages are loaded\r\n          const messageToEdit = this.allMessages.find(msg => msg.id == newMessageId);\r\n\r\n          if (messageToEdit) {\r\n            this.title = messageToEdit.title;\r\n            this.messageText = messageToEdit.messageText;\r\n          } else {\r\n            console.warn(`Message with ID ${newMessageId} not found in store.`);\r\n            this.$router.push(\"/not-found\"); // Redirect if message not found\r\n          }\r\n        }\r\n      }\r\n    },\r\n    // Watch 'allMessages' as a fallback, in case the messages array loads after the component\r\n    allMessages: {\r\n      immediate: true,\r\n      handler(newMessages) {\r\n        if (newMessages.length > 0 && this.messageId && (!this.title || !this.messageText)) {\r\n          const messageToEdit = newMessages.find(msg => msg.id == this.messageId);\r\n          if (messageToEdit) {\r\n            this.title = messageToEdit.title;\r\n            this.messageText = messageToEdit.messageText;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n/* Add some basic styles for the form, similar to UpdateTopic.vue */\r\nform {\r\n  margin-top: 20px;\r\n  padding: 20px;\r\n  background: rgba(255, 255, 255, 0.2);\r\n  border-radius: 10px;\r\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.field {\r\n  margin-bottom: 15px;\r\n}\r\n\r\n.field label {\r\n  display: block;\r\n  margin-bottom: 5px;\r\n  font-weight: bold;\r\n  color: #333;\r\n}\r\n\r\n.field input[type=\"text\"],\r\n.field textarea { /* Added textarea style */\r\n  width: 100%;\r\n  padding: 10px;\r\n  border: 1px solid rgba(0, 0, 0, 0.2);\r\n  border-radius: 5px;\r\n  background: rgba(255, 255, 255, 0.8);\r\n  box-sizing: border-box;\r\n}\r\n\r\n.field textarea {\r\n  min-height: 100px; /* Give textarea a default height */\r\n  resize: vertical; /* Allow vertical resizing */\r\n}\r\n\r\n.actions {\r\n  text-align: right;\r\n  margin-top: 20px;\r\n}\r\n\r\n.actions button {\r\n  padding: 10px 20px;\r\n  border: none;\r\n  border-radius: 5px;\r\n  cursor: pointer;\r\n  font-size: 16px;\r\n  margin-left: 10px;\r\n}\r\n\r\n.actions button[type=\"submit\"] {\r\n  background-color: #007bff; /* Blue for update */\r\n  color: white;\r\n}\r\n\r\n.actions button[type=\"submit\"]:hover {\r\n  background-color: #0056b3;\r\n}\r\n\r\n.actions button[type=\"button\"] { /* For the Cancel button */\r\n  background-color: #6c757d; /* Gray */\r\n  color: white;\r\n}\r\n\r\n.actions button[type=\"button\"]:hover {\r\n  background-color: #5a6268;\r\n}\r\n</style>"],"mappings":";;;AAcA;AACA;;AAEA,SAAAA,QAAA,EAAAC,UAAA;;AAEA;EACA;EACAC,IAAA;EACAC,KAAA;IACA;IACAC,OAAA,GAAAC,MAAA,EAAAC,MAAA;IACAC,SAAA,GAAAF,MAAA,EAAAC,MAAA;EACA;EACAE,KAAA;IACA;MACAC,KAAA;MACAC,WAAA;IACA;EACA;EACAC,QAAA;IACA;IACA,GAAAX,QAAA;EACA;EACAY,OAAA;IACA;IACA,GAAAX,UAAA;IAAA;;IAEAY,cAAA;MACA,MAAAC,cAAA;QACAC,EAAA,OAAAR,SAAA;QACAH,OAAA,OAAAA,OAAA;QACAK,KAAA,OAAAA,KAAA;QACAC,WAAA,OAAAA;MACA;;MAEA;MACA,KAAAM,gBAAA,CAAAF,cAAA,EACAG,IAAA;QACA;QACA,KAAAC,OAAA,CAAAC,IAAA;UAAAjB,IAAA;UAAAkB,MAAA;YAAAhB,OAAA,OAAAA;UAAA;QAAA;MACA,GACAiB,KAAA,CAAAC,KAAA;QACAC,OAAA,CAAAD,KAAA,4BAAAA,KAAA;QACA;MACA;IACA;IACAE,OAAA;MACA;MACA,KAAAN,OAAA,CAAAO,IAAA;IACA;EACA;EACAC,KAAA;IACA;IACAnB,SAAA;MACAoB,SAAA;MAAA;MACAC,QAAAC,YAAA;QACA,IAAAA,YAAA,SAAAC,WAAA,CAAAC,MAAA;UAAA;UACA,MAAAC,aAAA,QAAAF,WAAA,CAAAG,IAAA,CAAAC,GAAA,IAAAA,GAAA,CAAAnB,EAAA,IAAAc,YAAA;UAEA,IAAAG,aAAA;YACA,KAAAvB,KAAA,GAAAuB,aAAA,CAAAvB,KAAA;YACA,KAAAC,WAAA,GAAAsB,aAAA,CAAAtB,WAAA;UACA;YACAa,OAAA,CAAAY,IAAA,oBAAAN,YAAA;YACA,KAAAX,OAAA,CAAAC,IAAA;UACA;QACA;MACA;IACA;IACA;IACAW,WAAA;MACAH,SAAA;MACAC,QAAAQ,WAAA;QACA,IAAAA,WAAA,CAAAL,MAAA,aAAAxB,SAAA,WAAAE,KAAA,UAAAC,WAAA;UACA,MAAAsB,aAAA,GAAAI,WAAA,CAAAH,IAAA,CAAAC,GAAA,IAAAA,GAAA,CAAAnB,EAAA,SAAAR,SAAA;UACA,IAAAyB,aAAA;YACA,KAAAvB,KAAA,GAAAuB,aAAA,CAAAvB,KAAA;YACA,KAAAC,WAAA,GAAAsB,aAAA,CAAAtB,WAAA;UACA;QACA;MACA;IACA;EACA;AACA","ignoreList":[]}]}