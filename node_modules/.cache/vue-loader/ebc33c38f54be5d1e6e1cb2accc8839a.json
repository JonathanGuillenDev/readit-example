{"remainingRequest":"C:\\Users\\terme\\Documents\\GitHub\\readit-example\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\terme\\Documents\\GitHub\\readit-example\\src\\components\\UpdateMessage.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\terme\\Documents\\GitHub\\readit-example\\src\\components\\UpdateMessage.vue","mtime":1752853314768},{"path":"C:\\Users\\terme\\Documents\\GitHub\\readit-example\\node_modules\\babel-loader\\lib\\index.js","mtime":1752810158351},{"path":"C:\\Users\\terme\\Documents\\GitHub\\readit-example\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1752810157864},{"path":"C:\\Users\\terme\\Documents\\GitHub\\readit-example\\node_modules\\vue-loader\\lib\\index.js","mtime":1752810158306}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQovLyBSRU1PVkUgVEhJUyBJTVBPUlQgLSBObyBsb25nZXIgdXNpbmcgZXh0ZXJuYWwgc2VydmljZQ0KLy8gaW1wb3J0IG1lc3NhZ2VTZXJ2aWNlIGZyb20gIi4uL3NlcnZpY2VzL01lc3NhZ2VTZXJ2aWNlIjsNCg0KaW1wb3J0IHsgbWFwU3RhdGUsIG1hcEFjdGlvbnMgfSBmcm9tICd2dWV4JzsgLy8gSW1wb3J0IG1hcFN0YXRlIGFuZCBtYXBBY3Rpb25zDQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgLy8gUmVuYW1lZCBmb3IgY2xhcml0eSwgcmVmbGVjdGluZyBpdHMgcHVycG9zZSBhcyBhbiBlZGl0IGNvbXBvbmVudA0KICBuYW1lOiAiZWRpdC1tZXNzYWdlIiwNCiAgcHJvcHM6IHsNCiAgICAvLyBUaGVzZSBwcm9wcyBhcmUgcGFzc2VkIGZyb20gdGhlIHJvdXRlciBiYXNlZCBvbiB5b3VyIC86dG9waWNJZC9lZGl0LW1lc3NhZ2UvOm1lc3NhZ2VJZCByb3V0ZQ0KICAgIHRvcGljSWQ6IFtOdW1iZXIsIFN0cmluZ10sDQogICAgbWVzc2FnZUlkOiBbTnVtYmVyLCBTdHJpbmddDQogIH0sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIHRpdGxlOiAiIiwNCiAgICAgIG1lc3NhZ2VUZXh0OiAiIg0KICAgIH07DQogIH0sDQogIGNvbXB1dGVkOiB7DQogICAgLy8gTmVlZCBhY2Nlc3MgdG8gYWxsTWVzc2FnZXMgdG8gZmluZCB0aGUgc3BlY2lmaWMgbWVzc2FnZSB0byBlZGl0DQogICAgLi4ubWFwU3RhdGUoWydhbGxNZXNzYWdlcyddKQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgLy8gTWFwIHRoZSBhY3Rpb24gdG8gdXBkYXRlIGEgbWVzc2FnZQ0KICAgIC4uLm1hcEFjdGlvbnMoWyd1cGRhdGVUaGVNZXNzYWdlJ10pLCAvLyBZb3UnbGwgbmVlZCB0byBjcmVhdGUgdGhpcyBhY3Rpb24gYW5kIG11dGF0aW9uIGluIHlvdXIgc3RvcmUNCg0KICAgIHVwZGF0ZU1lc3NhZ2UoKSB7DQogICAgICBjb25zdCB1cGRhdGVkTWVzc2FnZSA9IHsNCiAgICAgICAgaWQ6IHRoaXMubWVzc2FnZUlkLA0KICAgICAgICB0b3BpY0lkOiB0aGlzLnRvcGljSWQsDQogICAgICAgIHRpdGxlOiB0aGlzLnRpdGxlLA0KICAgICAgICBtZXNzYWdlVGV4dDogdGhpcy5tZXNzYWdlVGV4dA0KICAgICAgfTsNCg0KICAgICAgLy8gRGlzcGF0Y2ggdGhlIFZ1ZXggYWN0aW9uIHRvIHVwZGF0ZSB0aGUgbWVzc2FnZSBpbiB0aGUgc3RvcmUNCiAgICAgIHRoaXMudXBkYXRlVGhlTWVzc2FnZSh1cGRhdGVkTWVzc2FnZSkNCiAgICAgICAgLnRoZW4oKCkgPT4gew0KICAgICAgICAgIC8vIEFmdGVyIHN1Y2Nlc3NmdWwgdXBkYXRlLCByZWRpcmVjdCB0byB0aGUgbWVzc2FnZXMgZm9yIHRoaXMgdG9waWMNCiAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7IG5hbWU6ICJNZXNzYWdlcyIsIHBhcmFtczogeyB0b3BpY0lkOiB0aGlzLnRvcGljSWQgfSB9KTsNCiAgICAgICAgfSkNCiAgICAgICAgLmNhdGNoKGVycm9yID0+IHsNCiAgICAgICAgICBjb25zb2xlLmVycm9yKCJFcnJvciB1cGRhdGluZyBtZXNzYWdlOiIsIGVycm9yKTsNCiAgICAgICAgICAvLyBIYW5kbGUgZXJyb3IsIGUuZy4sIHNob3cgYW4gYWxlcnQNCiAgICAgICAgfSk7DQogICAgfSwNCiAgICBjYW5jZWwoKSB7DQogICAgICAvLyBHbyBiYWNrIHRvIHRoZSBwcmV2aW91cyBwYWdlICh0b3BpYyBkZXRhaWxzKQ0KICAgICAgdGhpcy4kcm91dGVyLmJhY2soKTsNCiAgICB9DQogIH0sDQogIHdhdGNoOiB7DQogICAgLy8gV2F0Y2ggJ21lc3NhZ2VJZCcgdG8gbG9hZCB0aGUgbWVzc2FnZSBkZXRhaWxzIHdoZW4gdGhlIGNvbXBvbmVudCBpcyBjcmVhdGVkIG9yIG1lc3NhZ2VJZCBjaGFuZ2VzDQogICAgbWVzc2FnZUlkOiB7DQogICAgICBpbW1lZGlhdGU6IHRydWUsIC8vIFRoaXMgbWFrZXMgdGhlIHdhdGNoZXIgcnVuIGltbWVkaWF0ZWx5IHdoZW4gdGhlIGNvbXBvbmVudCBpcyBjcmVhdGVkDQogICAgICBoYW5kbGVyKG5ld01lc3NhZ2VJZCkgew0KICAgICAgICBpZiAobmV3TWVzc2FnZUlkICYmIHRoaXMuYWxsTWVzc2FnZXMubGVuZ3RoID4gMCkgeyAvLyBFbnN1cmUgYWxsTWVzc2FnZXMgYXJlIGxvYWRlZA0KICAgICAgICAgIGNvbnN0IG1lc3NhZ2VUb0VkaXQgPSB0aGlzLmFsbE1lc3NhZ2VzLmZpbmQobXNnID0+IG1zZy5pZCA9PSBuZXdNZXNzYWdlSWQpOw0KDQogICAgICAgICAgaWYgKG1lc3NhZ2VUb0VkaXQpIHsNCiAgICAgICAgICAgIHRoaXMudGl0bGUgPSBtZXNzYWdlVG9FZGl0LnRpdGxlOw0KICAgICAgICAgICAgdGhpcy5tZXNzYWdlVGV4dCA9IG1lc3NhZ2VUb0VkaXQubWVzc2FnZVRleHQ7DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIGNvbnNvbGUud2FybihgTWVzc2FnZSB3aXRoIElEICR7bmV3TWVzc2FnZUlkfSBub3QgZm91bmQgaW4gc3RvcmUuYCk7DQogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiL25vdC1mb3VuZCIpOyAvLyBSZWRpcmVjdCBpZiBtZXNzYWdlIG5vdCBmb3VuZA0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0sDQogICAgLy8gV2F0Y2ggJ2FsbE1lc3NhZ2VzJyBhcyBhIGZhbGxiYWNrLCBpbiBjYXNlIHRoZSBtZXNzYWdlcyBhcnJheSBsb2FkcyBhZnRlciB0aGUgY29tcG9uZW50DQogICAgYWxsTWVzc2FnZXM6IHsNCiAgICAgIGltbWVkaWF0ZTogdHJ1ZSwNCiAgICAgIGhhbmRsZXIobmV3TWVzc2FnZXMpIHsNCiAgICAgICAgaWYgKG5ld01lc3NhZ2VzLmxlbmd0aCA+IDAgJiYgdGhpcy5tZXNzYWdlSWQgJiYgKCF0aGlzLnRpdGxlIHx8ICF0aGlzLm1lc3NhZ2VUZXh0KSkgew0KICAgICAgICAgIGNvbnN0IG1lc3NhZ2VUb0VkaXQgPSBuZXdNZXNzYWdlcy5maW5kKG1zZyA9PiBtc2cuaWQgPT0gdGhpcy5tZXNzYWdlSWQpOw0KICAgICAgICAgIGlmIChtZXNzYWdlVG9FZGl0KSB7DQogICAgICAgICAgICB0aGlzLnRpdGxlID0gbWVzc2FnZVRvRWRpdC50aXRsZTsNCiAgICAgICAgICAgIHRoaXMubWVzc2FnZVRleHQgPSBtZXNzYWdlVG9FZGl0Lm1lc3NhZ2VUZXh0Ow0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0NCiAgfQ0KfTsNCg=="},{"version":3,"sources":["UpdateMessage.vue"],"names":[],"mappings":";AAcA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"UpdateMessage.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <form @submit.prevent=\"updateMessage\"> <div class=\"field\">\r\n      <label for=\"title\">Title</label>\r\n      <input id=\"title\" type=\"text\" v-model=\"title\" /> </div>\r\n    <div class=\"field\">\r\n      <label for=\"messageText\">Message</label>\r\n      <textarea id=\"messageText\" v-model=\"messageText\"></textarea> </div>\r\n    <div class=\"actions\">\r\n      <button type=\"submit\">Update Message</button>\r\n      <button type=\"button\" @click=\"cancel\">Cancel</button> </div>\r\n  </form>\r\n</template>\r\n\r\n<script>\r\n// REMOVE THIS IMPORT - No longer using external service\r\n// import messageService from \"../services/MessageService\";\r\n\r\nimport { mapState, mapActions } from 'vuex'; // Import mapState and mapActions\r\n\r\nexport default {\r\n  // Renamed for clarity, reflecting its purpose as an edit component\r\n  name: \"edit-message\",\r\n  props: {\r\n    // These props are passed from the router based on your /:topicId/edit-message/:messageId route\r\n    topicId: [Number, String],\r\n    messageId: [Number, String]\r\n  },\r\n  data() {\r\n    return {\r\n      title: \"\",\r\n      messageText: \"\"\r\n    };\r\n  },\r\n  computed: {\r\n    // Need access to allMessages to find the specific message to edit\r\n    ...mapState(['allMessages'])\r\n  },\r\n  methods: {\r\n    // Map the action to update a message\r\n    ...mapActions(['updateTheMessage']), // You'll need to create this action and mutation in your store\r\n\r\n    updateMessage() {\r\n      const updatedMessage = {\r\n        id: this.messageId,\r\n        topicId: this.topicId,\r\n        title: this.title,\r\n        messageText: this.messageText\r\n      };\r\n\r\n      // Dispatch the Vuex action to update the message in the store\r\n      this.updateTheMessage(updatedMessage)\r\n        .then(() => {\r\n          // After successful update, redirect to the messages for this topic\r\n          this.$router.push({ name: \"Messages\", params: { topicId: this.topicId } });\r\n        })\r\n        .catch(error => {\r\n          console.error(\"Error updating message:\", error);\r\n          // Handle error, e.g., show an alert\r\n        });\r\n    },\r\n    cancel() {\r\n      // Go back to the previous page (topic details)\r\n      this.$router.back();\r\n    }\r\n  },\r\n  watch: {\r\n    // Watch 'messageId' to load the message details when the component is created or messageId changes\r\n    messageId: {\r\n      immediate: true, // This makes the watcher run immediately when the component is created\r\n      handler(newMessageId) {\r\n        if (newMessageId && this.allMessages.length > 0) { // Ensure allMessages are loaded\r\n          const messageToEdit = this.allMessages.find(msg => msg.id == newMessageId);\r\n\r\n          if (messageToEdit) {\r\n            this.title = messageToEdit.title;\r\n            this.messageText = messageToEdit.messageText;\r\n          } else {\r\n            console.warn(`Message with ID ${newMessageId} not found in store.`);\r\n            this.$router.push(\"/not-found\"); // Redirect if message not found\r\n          }\r\n        }\r\n      }\r\n    },\r\n    // Watch 'allMessages' as a fallback, in case the messages array loads after the component\r\n    allMessages: {\r\n      immediate: true,\r\n      handler(newMessages) {\r\n        if (newMessages.length > 0 && this.messageId && (!this.title || !this.messageText)) {\r\n          const messageToEdit = newMessages.find(msg => msg.id == this.messageId);\r\n          if (messageToEdit) {\r\n            this.title = messageToEdit.title;\r\n            this.messageText = messageToEdit.messageText;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n/* Add some basic styles for the form, similar to UpdateTopic.vue */\r\nform {\r\n  margin-top: 20px;\r\n  padding: 20px;\r\n  background: rgba(255, 255, 255, 0.2);\r\n  border-radius: 10px;\r\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.field {\r\n  margin-bottom: 15px;\r\n}\r\n\r\n.field label {\r\n  display: block;\r\n  margin-bottom: 5px;\r\n  font-weight: bold;\r\n  color: #333;\r\n}\r\n\r\n.field input[type=\"text\"],\r\n.field textarea { /* Added textarea style */\r\n  width: 100%;\r\n  padding: 10px;\r\n  border: 1px solid rgba(0, 0, 0, 0.2);\r\n  border-radius: 5px;\r\n  background: rgba(255, 255, 255, 0.8);\r\n  box-sizing: border-box;\r\n}\r\n\r\n.field textarea {\r\n  min-height: 100px; /* Give textarea a default height */\r\n  resize: vertical; /* Allow vertical resizing */\r\n}\r\n\r\n.actions {\r\n  text-align: right;\r\n  margin-top: 20px;\r\n}\r\n\r\n.actions button {\r\n  padding: 10px 20px;\r\n  border: none;\r\n  border-radius: 5px;\r\n  cursor: pointer;\r\n  font-size: 16px;\r\n  margin-left: 10px;\r\n}\r\n\r\n.actions button[type=\"submit\"] {\r\n  background-color: #007bff; /* Blue for update */\r\n  color: white;\r\n}\r\n\r\n.actions button[type=\"submit\"]:hover {\r\n  background-color: #0056b3;\r\n}\r\n\r\n.actions button[type=\"button\"] { /* For the Cancel button */\r\n  background-color: #6c757d; /* Gray */\r\n  color: white;\r\n}\r\n\r\n.actions button[type=\"button\"]:hover {\r\n  background-color: #5a6268;\r\n}\r\n</style>"]}]}