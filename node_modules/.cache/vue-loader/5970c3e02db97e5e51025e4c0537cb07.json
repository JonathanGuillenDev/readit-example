{"remainingRequest":"C:\\Users\\terme\\Documents\\GitHub\\readit-example\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\terme\\Documents\\GitHub\\readit-example\\src\\components\\TopicDetails.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\terme\\Documents\\GitHub\\readit-example\\src\\components\\TopicDetails.vue","mtime":1752852888760},{"path":"C:\\Users\\terme\\Documents\\GitHub\\readit-example\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1752810157864},{"path":"C:\\Users\\terme\\Documents\\GitHub\\readit-example\\node_modules\\babel-loader\\lib\\index.js","mtime":1752810158351},{"path":"C:\\Users\\terme\\Documents\\GitHub\\readit-example\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1752810157864},{"path":"C:\\Users\\terme\\Documents\\GitHub\\readit-example\\node_modules\\vue-loader\\lib\\index.js","mtime":1752810158306}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQovLyBSRU1PVkUgVEhFU0UgSU1QT1JUUyAtIFdlIGFyZSBubyBsb25nZXIgdXNpbmcgZXh0ZXJuYWwgc2VydmljZXMgZm9yIGRhdGENCi8vIGltcG9ydCB0b3BpY1NlcnZpY2UgZnJvbSAiQC9zZXJ2aWNlcy9Ub3BpY1NlcnZpY2UuanMiOw0KLy8gaW1wb3J0IG1lc3NhZ2VTZXJ2aWNlIGZyb20gIkAvc2VydmljZXMvTWVzc2FnZVNlcnZpY2UuanMiOw0KDQppbXBvcnQgeyBtYXBTdGF0ZSwgbWFwQWN0aW9ucyB9IGZyb20gJ3Z1ZXgnOyAvLyBJbXBvcnQgbWFwU3RhdGUgYW5kIG1hcEFjdGlvbnMNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAidG9waWMtZGV0YWlscyIsDQogIHByb3BzOiB7DQogICAgLy8gRW5zdXJlIHRoYXQgdG9waWNJZCBpcyBwYXNzZWQgYXMgYSBwcm9wIGZyb20geW91ciByb3V0ZXIgY29uZmlnDQogICAgdG9waWNJZDogW051bWJlciwgU3RyaW5nXSAvLyBBbGxvdyBzdHJpbmcgZm9yIHJvdXRlIHBhcmFtcywgY29udmVydCBpZiBuZWVkZWQNCiAgfSwNCiAgY29tcHV0ZWQ6IHsNCiAgICAvLyBNYXAgc3RhdGUgcHJvcGVydGllcyBmb3IgZGlyZWN0IGFjY2VzcyBpbiB0ZW1wbGF0ZSBhbmQgc2NyaXB0DQogICAgLi4ubWFwU3RhdGUoWydhY3RpdmVUb3BpYycsICd0b3BpY3MnXSkgLy8gTmVlZCAndG9waWNzJyB0byBmaW5kIHRoZSB0b3BpYyBieSBJRA0KICB9LA0KICBtZXRob2RzOiB7DQogICAgLy8gTWFwIGFjdGlvbnMgdG8gYmUgZGlzcGF0Y2hlZA0KICAgIC4uLm1hcEFjdGlvbnMoWydzZWxlY3RUb3BpYycsICdkZWxldGVNZXNzYWdlJ10pLCAvLyAnc2VsZWN0VG9waWMnIGlzIGNydWNpYWwgZm9yIGluaXRpYWwgbG9hZA0KDQogICAgY29uZmlybUFuZERlbGV0ZU1lc3NhZ2UoaWQpIHsNCiAgICAgIGlmIChjb25maXJtKCJBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlIHRoaXMgbWVzc2FnZT8iKSkgew0KICAgICAgICAvLyBEaXNwYXRjaCB0aGUgZGVsZXRlTWVzc2FnZSBhY3Rpb24gZnJvbSB0aGUgc3RvcmUNCiAgICAgICAgdGhpcy5kZWxldGVNZXNzYWdlKGlkKTsNCiAgICAgIH0NCiAgICB9DQogIH0sDQogIC8vIFVzZSBhIHdhdGNoZXIgdG8gcmVhY3QgdG8gY2hhbmdlcyBpbiB0b3BpY0lkIGZyb20gdGhlIHJvdXRlDQogIC8vIGFuZCBhbHNvIHRvIGhhbmRsZSB0aGUgaW5pdGlhbCBsb2FkLg0KICB3YXRjaDogew0KICAgIHRvcGljSWQ6IHsNCiAgICAgIGltbWVkaWF0ZTogdHJ1ZSwgLy8gVGhpcyBtYWtlcyB0aGUgd2F0Y2hlciBydW4gaW1tZWRpYXRlbHkgd2hlbiB0aGUgY29tcG9uZW50IGlzIGNyZWF0ZWQNCiAgICAgIGhhbmRsZXIobmV3VG9waWNJZCkgew0KICAgICAgICBpZiAobmV3VG9waWNJZCAmJiB0aGlzLnRvcGljcy5sZW5ndGggPiAwKSB7IC8vIEVuc3VyZSB0b3BpY3MgYXJlIGxvYWRlZCBiZWZvcmUgc2VhcmNoaW5nDQogICAgICAgICAgY29uc3QgdG9waWNUb1NlbGVjdCA9IHRoaXMudG9waWNzLmZpbmQodCA9PiB0LmlkID09IG5ld1RvcGljSWQpOyAvLyBVc2UgPT0gZm9yIGxvb3NlIGNvbXBhcmlzb24gYXMgcm91dGUgcGFyYW0gbWlnaHQgYmUgc3RyaW5nDQoNCiAgICAgICAgICBpZiAodG9waWNUb1NlbGVjdCkgew0KICAgICAgICAgICAgLy8gRGlzcGF0Y2ggdGhlIHNlbGVjdFRvcGljIGFjdGlvbiwgd2hpY2ggd2lsbCB1cGRhdGUgYWN0aXZlVG9waWMgYW5kIGl0cyBtZXNzYWdlcw0KICAgICAgICAgICAgdGhpcy5zZWxlY3RUb3BpYyh0b3BpY1RvU2VsZWN0KTsNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgY29uc29sZS53YXJuKGBUb3BpYyB3aXRoIElEICR7bmV3VG9waWNJZH0gbm90IGZvdW5kIGluIHN0b3JlLmApOw0KICAgICAgICAgICAgLy8gT3B0aW9uYWw6IFJlZGlyZWN0IHRvIGEgNDA0IHBhZ2Ugb3IgaG9tZSBpZiB0b3BpYyBub3QgZm91bmQNCiAgICAgICAgICAgIC8vIHRoaXMuJHJvdXRlci5wdXNoKCIvbm90LWZvdW5kIik7DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9DQogICAgfSwNCiAgICAvLyBBZGQgYSB3YXRjaGVyIGZvciAndG9waWNzJyBzdGF0ZSBhcyB3ZWxsLiBUaGlzIGhhbmRsZXMgY2FzZXMgd2hlcmUgJ3RvcGljcycgbWlnaHQNCiAgICAvLyBiZSBwb3B1bGF0ZWQgc2xpZ2h0bHkgYWZ0ZXIgJ3RvcGljSWQnIGlzIGF2YWlsYWJsZSAoZS5nLiwgaWYgaW5pdGlhbERhdGEgbG9hZCBpcyBkZWxheWVkLCB0aG91Z2ggdW5saWtlbHkgZm9yIHN0YXRpYyBKU09OKQ0KICAgIHRvcGljczogew0KICAgICAgaW1tZWRpYXRlOiB0cnVlLA0KICAgICAgaGFuZGxlcihuZXdUb3BpY3MpIHsNCiAgICAgICAgaWYgKG5ld1RvcGljcy5sZW5ndGggPiAwICYmIHRoaXMudG9waWNJZCkgew0KICAgICAgICAgIGNvbnN0IHRvcGljVG9TZWxlY3QgPSBuZXdUb3BpY3MuZmluZCh0ID0+IHQuaWQgPT0gdGhpcy50b3BpY0lkKTsNCiAgICAgICAgICAvLyBPbmx5IHNlbGVjdCBpZiBpdCdzIGEgZGlmZmVyZW50IHRvcGljIHRoYW4gY3VycmVudGx5IGFjdGl2ZSB0byBhdm9pZCB1bm5lY2Vzc2FyeSByZS1yZW5kZXJzDQogICAgICAgICAgaWYgKHRvcGljVG9TZWxlY3QgJiYgdGhpcy5hY3RpdmVUb3BpYy5pZCAhPT0gdG9waWNUb1NlbGVjdC5pZCkgew0KICAgICAgICAgICAgIHRoaXMuc2VsZWN0VG9waWModG9waWNUb1NlbGVjdCk7DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9DQogICAgfQ0KICB9DQp9Ow0K"},{"version":3,"sources":["TopicDetails.vue"],"names":[],"mappings":";AAiCA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TopicDetails.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div class=\"topic-details\">\r\n    <h1>{{ activeTopic.title }}</h1>\r\n    <router-link\r\n      :to=\"{ name: 'AddMessage', params: { topicId: activeTopic.id } }\"\r\n      class=\"addMessage\"\r\n    >Add New Message</router-link>\r\n\r\n    <div\r\n      v-for=\"message in activeTopic.messages\"\r\n      v-bind:key=\"message.id\"\r\n      class=\"topic-message bubble\"\r\n    >\r\n      <h3 class=\"message-title\">{{ message.title }}</h3>\r\n      <p class=\"message-body\">{{ message.messageText }}</p>\r\n      <router-link\r\n        :to=\"{ name: 'EditMessage', params: { topicId: activeTopic.id, messageId: message.id } }\"\r\n        tag=\"button\"\r\n        class=\"btnEditMessage\"\r\n      >Edit</router-link>\r\n      <button class=\"btnDeleteMessage\" @click=\"confirmAndDeleteMessage(message.id)\">Delete</button>\r\n    </div>\r\n\r\n    <div v-if=\"!activeTopic.id\">\r\n      <p>Loading topic or topic not found...</p>\r\n    </div>\r\n    <div v-else-if=\"activeTopic.messages && activeTopic.messages.length === 0\">\r\n      <p>No messages for this topic yet. Be the first to add one!</p>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// REMOVE THESE IMPORTS - We are no longer using external services for data\r\n// import topicService from \"@/services/TopicService.js\";\r\n// import messageService from \"@/services/MessageService.js\";\r\n\r\nimport { mapState, mapActions } from 'vuex'; // Import mapState and mapActions\r\n\r\nexport default {\r\n  name: \"topic-details\",\r\n  props: {\r\n    // Ensure that topicId is passed as a prop from your router config\r\n    topicId: [Number, String] // Allow string for route params, convert if needed\r\n  },\r\n  computed: {\r\n    // Map state properties for direct access in template and script\r\n    ...mapState(['activeTopic', 'topics']) // Need 'topics' to find the topic by ID\r\n  },\r\n  methods: {\r\n    // Map actions to be dispatched\r\n    ...mapActions(['selectTopic', 'deleteMessage']), // 'selectTopic' is crucial for initial load\r\n\r\n    confirmAndDeleteMessage(id) {\r\n      if (confirm(\"Are you sure you want to delete this message?\")) {\r\n        // Dispatch the deleteMessage action from the store\r\n        this.deleteMessage(id);\r\n      }\r\n    }\r\n  },\r\n  // Use a watcher to react to changes in topicId from the route\r\n  // and also to handle the initial load.\r\n  watch: {\r\n    topicId: {\r\n      immediate: true, // This makes the watcher run immediately when the component is created\r\n      handler(newTopicId) {\r\n        if (newTopicId && this.topics.length > 0) { // Ensure topics are loaded before searching\r\n          const topicToSelect = this.topics.find(t => t.id == newTopicId); // Use == for loose comparison as route param might be string\r\n\r\n          if (topicToSelect) {\r\n            // Dispatch the selectTopic action, which will update activeTopic and its messages\r\n            this.selectTopic(topicToSelect);\r\n          } else {\r\n            console.warn(`Topic with ID ${newTopicId} not found in store.`);\r\n            // Optional: Redirect to a 404 page or home if topic not found\r\n            // this.$router.push(\"/not-found\");\r\n          }\r\n        }\r\n      }\r\n    },\r\n    // Add a watcher for 'topics' state as well. This handles cases where 'topics' might\r\n    // be populated slightly after 'topicId' is available (e.g., if initialData load is delayed, though unlikely for static JSON)\r\n    topics: {\r\n      immediate: true,\r\n      handler(newTopics) {\r\n        if (newTopics.length > 0 && this.topicId) {\r\n          const topicToSelect = newTopics.find(t => t.id == this.topicId);\r\n          // Only select if it's a different topic than currently active to avoid unnecessary re-renders\r\n          if (topicToSelect && this.activeTopic.id !== topicToSelect.id) {\r\n             this.selectTopic(topicToSelect);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n/* Your existing styles (no changes needed here) */\r\n/** page structure **/\r\n.topic-details {\r\n  padding: 20px 20px;\r\n  margin: 0 auto;\r\n  max-width: 600px;\r\n}\r\n\r\n/** ios1-ios6 bubbles **/\r\n.topic-details .bubble {\r\n  box-sizing: border-box;\r\n  width: auto;\r\n  position: relative;\r\n  clear: both;\r\n\r\n  background: #95c2fd;\r\n  background-image: -webkit-gradient(\r\n    linear,\r\n    left bottom,\r\n    left top,\r\n    color-stop(0.15, #bee2ff),\r\n    color-stop(1, #95c2fd)\r\n  );\r\n  background-image: -webkit-linear-gradient(bottom, #bee2ff 15%, #95c2fd 100%);\r\n  background-image: -moz-linear-gradient(bottom, #bee2ff 15%, #95c2fd 100%);\r\n  background-image: -ms-linear-gradient(bottom, #bee2ff 15%, #95c2fd 100%);\r\n  background-image: -o-linear-gradient(bottom, #bee2ff 15%, #95c2fd 100%);\r\n  background-image: linear-gradient(to top, #bee2ff 15%, #95c2fd 100%);\r\n  filter: progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr='#95c2fd', endColorstr='#bee2ff');\r\n\r\n  border: solid 1px rgba(0, 0, 0, 0.5);\r\n  -webkit-border-radius: 20px;\r\n  -moz-border-radius: 20px;\r\n  border-radius: 20px;\r\n\r\n  -webkit-box-shadow: inset 0 8px 5px rgba(255, 255, 255, 0.65),\r\n    0 1px 2px rgba(0, 0, 0, 0.2);\r\n  -moz-box-shadow: inset 0 8px 5px rgba(255, 255, 255, 0.65),\r\n    0 1px 2px rgba(0, 0, 0, 0.2);\r\n  box-shadow: inset 0 8px 5px rgba(255, 255, 255, 0.65),\r\n    0 1px 2px rgba(0, 0, 0, 0.2);\r\n  margin-bottom: 20px;\r\n  padding: 6px 20px;\r\n  color: #000;\r\n  text-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);\r\n  word-wrap: break-word;\r\n}\r\n\r\n.addMessage {\r\n  display: block;\r\n  padding: 0 0 10px 10px;\r\n}\r\na.addMessage:link,\r\na.addMessage:visited {\r\n  color: blue;\r\n  text-decoration: none;\r\n}\r\na.addMessage:hover {\r\n  text-decoration: underline;\r\n}\r\n</style>"]}]}