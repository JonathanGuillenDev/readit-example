{"remainingRequest":"C:\\Users\\terme\\Documents\\GitHub\\readit-example\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\terme\\Documents\\GitHub\\readit-example\\src\\components\\CreateMessage.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\terme\\Documents\\GitHub\\readit-example\\src\\components\\CreateMessage.vue","mtime":1752853470946},{"path":"C:\\Users\\terme\\Documents\\GitHub\\readit-example\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1752810157864},{"path":"C:\\Users\\terme\\Documents\\GitHub\\readit-example\\node_modules\\babel-loader\\lib\\index.js","mtime":1752810158351},{"path":"C:\\Users\\terme\\Documents\\GitHub\\readit-example\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1752810157864},{"path":"C:\\Users\\terme\\Documents\\GitHub\\readit-example\\node_modules\\vue-loader\\lib\\index.js","mtime":1752810158306}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQovLyBSRU1PVkUgVEhJUyBJTVBPUlQgLSBObyBsb25nZXIgdXNpbmcgZXh0ZXJuYWwgc2VydmljZQ0KLy8gaW1wb3J0IG1lc3NhZ2VTZXJ2aWNlIGZyb20gIkAvc2VydmljZXMvTWVzc2FnZVNlcnZpY2UuanMiOw0KDQppbXBvcnQgeyBtYXBBY3Rpb25zIH0gZnJvbSAndnVleCc7IC8vIEltcG9ydCBtYXBBY3Rpb25zDQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogImNyZWF0ZS1tZXNzYWdlIiwNCiAgcHJvcHM6IHsNCiAgICAvLyBFbnN1cmUgdG9waWNJZCBpcyBwYXNzZWQgYXMgYSBwcm9wIGZyb20geW91ciByb3V0ZXIgY29uZmlnDQogICAgdG9waWNJZDogW051bWJlciwgU3RyaW5nXQ0KICB9LA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBtZXNzYWdlOiB7DQogICAgICAgIC8vIElEIHdpbGwgYmUgZ2VuZXJhdGVkIGJ5IHRoZSBhZGRNZXNzYWdlIGFjdGlvbiBpbiB0aGUgc3RvcmUsDQogICAgICAgIC8vIG9yIHlvdSBjYW4gZ2VuZXJhdGUgaXQgaGVyZToNCiAgICAgICAgaWQ6IHRoaXMuZ2VuZXJhdGVVbmlxdWVJZCgpLCAvLyBVc2UgYSBtZXRob2QgdG8gZ2VuZXJhdGUgSUQNCiAgICAgICAgdG9waWNJZDogdGhpcy50b3BpY0lkLCAvLyBUaGlzIHByb3Agc2hvdWxkIGJlIGNvcnJlY3RseSBwYXNzZWQgZnJvbSB0aGUgcm91dGVyDQogICAgICAgIHRpdGxlOiAiIiwNCiAgICAgICAgbWVzc2FnZVRleHQ6ICIiDQogICAgICB9DQogICAgfTsNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIC8vIE1hcCB0aGUgYWN0aW9uIHRvIGFkZCBhIG5ldyBtZXNzYWdlDQogICAgLi4ubWFwQWN0aW9ucyhbJ2FkZE1lc3NhZ2UnXSksIC8vIFRoaXMgYWN0aW9uIGlzIGFscmVhZHkgZGVmaW5lZCBpbiB5b3VyIHN0b3JlDQoNCiAgICBnZW5lcmF0ZVVuaXF1ZUlkKCkgew0KICAgICAgLy8gQSBzaW1wbGUgbWV0aG9kIGZvciB1bmlxdWUgSURzIGluIGEgc3RhdGljIGNvbnRleHQuDQogICAgICAvLyBJbiBhIHJlYWwgYXBwLCBJRHMgd291bGQgY29tZSBmcm9tIHRoZSBkYXRhYmFzZS4NCiAgICAgIHJldHVybiBEYXRlLm5vdygpICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwMCk7DQogICAgfSwNCiAgICBzYXZlTWVzc2FnZSgpIHsNCiAgICAgIGlmICghdGhpcy5tZXNzYWdlLnRpdGxlLnRyaW0oKSB8fCAhdGhpcy5tZXNzYWdlLm1lc3NhZ2VUZXh0LnRyaW0oKSkgeyAvLyBCYXNpYyB2YWxpZGF0aW9uDQogICAgICAgIGFsZXJ0KCdNZXNzYWdlIHRpdGxlIGFuZCB0ZXh0IGNhbm5vdCBiZSBlbXB0eS4nKTsNCiAgICAgICAgcmV0dXJuOw0KICAgICAgfQ0KDQogICAgICAvLyBFbnN1cmUgdG9waWNJZCBpcyBzZXQgYmVmb3JlIHNhdmluZw0KICAgICAgdGhpcy5tZXNzYWdlLnRvcGljSWQgPSB0aGlzLnRvcGljSWQ7DQoNCiAgICAgIC8vIERpc3BhdGNoIHRoZSBWdWV4IGFjdGlvbiB0byBhZGQgdGhlIG5ldyBtZXNzYWdlIHRvIHRoZSBzdG9yZQ0KICAgICAgdGhpcy5hZGRNZXNzYWdlKHRoaXMubWVzc2FnZSkNCiAgICAgICAgLnRoZW4oKCkgPT4gew0KICAgICAgICAgIC8vIEFmdGVyIHN1Y2Nlc3NmdWwgYWRkaXRpb24sIHJlZGlyZWN0IHRvIHRoZSBtZXNzYWdlcyBmb3IgdGhpcyB0b3BpYw0KICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsgbmFtZTogIk1lc3NhZ2VzIiwgcGFyYW1zOiB7IHRvcGljSWQ6IHRoaXMudG9waWNJZCB9IH0pOyAvLyBVc2UgdG9waWNJZA0KICAgICAgICB9KQ0KICAgICAgICAuY2F0Y2goZXJyb3IgPT4gew0KICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIkVycm9yIGFkZGluZyBtZXNzYWdlOiIsIGVycm9yKTsNCiAgICAgICAgICAvLyBIYW5kbGUgZXJyb3IsIGUuZy4sIHNob3cgYW4gYWxlcnQNCiAgICAgICAgfSk7DQogICAgfSwNCiAgICBjYW5jZWwoKSB7DQogICAgICAvLyBHbyBiYWNrIHRvIHRoZSBwcmV2aW91cyBwYWdlICh0b3BpYyBkZXRhaWxzKQ0KICAgICAgdGhpcy4kcm91dGVyLmJhY2soKTsNCiAgICB9DQogIH0sDQogIHdhdGNoOiB7DQogICAgLy8gSWYgdG9waWNJZCBjYW4gY2hhbmdlIHdoaWxlIGNvbXBvbmVudCBpcyBtb3VudGVkIChlLmcuLCBkeW5hbWljIHJvdXRlIGNoYW5nZXMpDQogICAgLy8gZW5zdXJlIG1lc3NhZ2UudG9waWNJZCBpcyB1cGRhdGVkLiBOb3Qgc3RyaWN0bHkgbmVjZXNzYXJ5IGlmIGNvbXBvbmVudCByZW1vdW50cy4NCiAgICB0b3BpY0lkKG5ld1RvcGljSWQpIHsNCiAgICAgIHRoaXMubWVzc2FnZS50b3BpY0lkID0gbmV3VG9waWNJZDsNCiAgICB9DQogIH0NCn07DQo="},{"version":3,"sources":["CreateMessage.vue"],"names":[],"mappings":";AAkBA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CreateMessage.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <form @submit.prevent=\"saveMessage\"> <!-- Use @submit.prevent on the form -->\r\n    <div class=\"field\">\r\n      <label for=\"title\">Title</label>\r\n      <input type=\"text\" id=\"title\" v-model=\"message.title\" /> <!-- Added ID for accessibility -->\r\n    </div>\r\n    <div class=\"field\">\r\n      <label for=\"messageText\">Message</label>\r\n      <textarea id=\"messageText\" v-model=\"message.messageText\"></textarea> <!-- Changed to textarea for multiline messages -->\r\n    </div>\r\n    <div class=\"actions\">\r\n      <button type=\"submit\">Save Message</button>\r\n      <button type=\"button\" @click=\"cancel\">Cancel</button> <!-- Added a cancel button -->\r\n    </div>\r\n  </form>\r\n</template>\r\n\r\n<script>\r\n// REMOVE THIS IMPORT - No longer using external service\r\n// import messageService from \"@/services/MessageService.js\";\r\n\r\nimport { mapActions } from 'vuex'; // Import mapActions\r\n\r\nexport default {\r\n  name: \"create-message\",\r\n  props: {\r\n    // Ensure topicId is passed as a prop from your router config\r\n    topicId: [Number, String]\r\n  },\r\n  data() {\r\n    return {\r\n      message: {\r\n        // ID will be generated by the addMessage action in the store,\r\n        // or you can generate it here:\r\n        id: this.generateUniqueId(), // Use a method to generate ID\r\n        topicId: this.topicId, // This prop should be correctly passed from the router\r\n        title: \"\",\r\n        messageText: \"\"\r\n      }\r\n    };\r\n  },\r\n  methods: {\r\n    // Map the action to add a new message\r\n    ...mapActions(['addMessage']), // This action is already defined in your store\r\n\r\n    generateUniqueId() {\r\n      // A simple method for unique IDs in a static context.\r\n      // In a real app, IDs would come from the database.\r\n      return Date.now() + Math.floor(Math.random() * 1000);\r\n    },\r\n    saveMessage() {\r\n      if (!this.message.title.trim() || !this.message.messageText.trim()) { // Basic validation\r\n        alert('Message title and text cannot be empty.');\r\n        return;\r\n      }\r\n\r\n      // Ensure topicId is set before saving\r\n      this.message.topicId = this.topicId;\r\n\r\n      // Dispatch the Vuex action to add the new message to the store\r\n      this.addMessage(this.message)\r\n        .then(() => {\r\n          // After successful addition, redirect to the messages for this topic\r\n          this.$router.push({ name: \"Messages\", params: { topicId: this.topicId } }); // Use topicId\r\n        })\r\n        .catch(error => {\r\n          console.error(\"Error adding message:\", error);\r\n          // Handle error, e.g., show an alert\r\n        });\r\n    },\r\n    cancel() {\r\n      // Go back to the previous page (topic details)\r\n      this.$router.back();\r\n    }\r\n  },\r\n  watch: {\r\n    // If topicId can change while component is mounted (e.g., dynamic route changes)\r\n    // ensure message.topicId is updated. Not strictly necessary if component remounts.\r\n    topicId(newTopicId) {\r\n      this.message.topicId = newTopicId;\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n/* Add some basic styles for the form, consistent with other forms */\r\nform {\r\n  margin-top: 20px;\r\n  padding: 20px;\r\n  background: rgba(255, 255, 255, 0.2);\r\n  border-radius: 10px;\r\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.field {\r\n  margin-bottom: 15px;\r\n}\r\n\r\n.field label {\r\n  display: block;\r\n  margin-bottom: 5px;\r\n  font-weight: bold;\r\n  color: #333;\r\n}\r\n\r\n.field input[type=\"text\"],\r\n.field textarea { /* Added textarea style */\r\n  width: 100%;\r\n  padding: 10px;\r\n  border: 1px solid rgba(0, 0, 0, 0.2);\r\n  border-radius: 5px;\r\n  background: rgba(255, 255, 255, 0.8);\r\n  box-sizing: border-box;\r\n}\r\n\r\n.field textarea {\r\n  min-height: 100px; /* Give textarea a default height */\r\n  resize: vertical; /* Allow vertical resizing */\r\n}\r\n\r\n.actions {\r\n  text-align: right;\r\n  margin-top: 20px;\r\n}\r\n\r\n.actions button {\r\n  padding: 10px 20px;\r\n  border: none;\r\n  border-radius: 5px;\r\n  cursor: pointer;\r\n  font-size: 16px;\r\n  margin-left: 10px;\r\n}\r\n\r\n.actions button[type=\"submit\"] {\r\n  background-color: #28a745; /* Green for save */\r\n  color: white;\r\n}\r\n\r\n.actions button[type=\"submit\"]:hover {\r\n  background-color: #218838;\r\n}\r\n\r\n.actions button[type=\"button\"] { /* For the Cancel button */\r\n  background-color: #6c757d; /* Gray */\r\n  color: white;\r\n}\r\n\r\n.actions button[type=\"button\"]:hover {\r\n  background-color: #5a6268;\r\n}\r\n</style>"]}]}