{"remainingRequest":"C:\\Users\\terme\\Documents\\GitHub\\readit-example\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\terme\\Documents\\GitHub\\readit-example\\src\\components\\TopicDetails.vue?vue&type=style&index=0&id=d287aa9a&prod&lang=css","dependencies":[{"path":"C:\\Users\\terme\\Documents\\GitHub\\readit-example\\src\\components\\TopicDetails.vue","mtime":1752855093308},{"path":"C:\\Users\\terme\\Documents\\GitHub\\readit-example\\node_modules\\css-loader\\dist\\cjs.js","mtime":1752810157558},{"path":"C:\\Users\\terme\\Documents\\GitHub\\readit-example\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1752810158948},{"path":"C:\\Users\\terme\\Documents\\GitHub\\readit-example\\node_modules\\postcss-loader\\src\\index.js","mtime":1752810157001},{"path":"C:\\Users\\terme\\Documents\\GitHub\\readit-example\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1752810157864},{"path":"C:\\Users\\terme\\Documents\\GitHub\\readit-example\\node_modules\\vue-loader\\lib\\index.js","mtime":1752810158306}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQovKiBZb3VyIGV4aXN0aW5nIHN0eWxlcyAobm8gY2hhbmdlcyBuZWVkZWQgaGVyZSkgKi8NCi8qKiBwYWdlIHN0cnVjdHVyZSAqKi8NCi50b3BpYy1kZXRhaWxzIHsNCiAgcGFkZGluZzogMjBweCAyMHB4Ow0KICBtYXJnaW46IDAgYXV0bzsNCiAgbWF4LXdpZHRoOiA2MDBweDsNCn0NCg0KLyoqIGlvczEtaW9zNiBidWJibGVzICoqLw0KLnRvcGljLWRldGFpbHMgLmJ1YmJsZSB7DQogIGJveC1zaXppbmc6IGJvcmRlci1ib3g7DQogIHdpZHRoOiBhdXRvOw0KICBwb3NpdGlvbjogcmVsYXRpdmU7DQogIGNsZWFyOiBib3RoOw0KDQogIGJhY2tncm91bmQ6ICM5NWMyZmQ7DQogIGJhY2tncm91bmQtaW1hZ2U6IC13ZWJraXQtZ3JhZGllbnQoDQogICAgbGluZWFyLA0KICAgIGxlZnQgYm90dG9tLA0KICAgIGxlZnQgdG9wLA0KICAgIGNvbG9yLXN0b3AoMC4xNSwgI2JlZTJmZiksDQogICAgY29sb3Itc3RvcCgxLCAjOTVjMmZkKQ0KICApOw0KICBiYWNrZ3JvdW5kLWltYWdlOiAtd2Via2l0LWxpbmVhci1ncmFkaWVudChib3R0b20sICNiZWUyZmYgMTUlLCAjOTVjMmZkIDEwMCUpOw0KICBiYWNrZ3JvdW5kLWltYWdlOiAtbW96LWxpbmVhci1ncmFkaWVudChib3R0b20sICNiZWUyZmYgMTUlLCAjOTVjMmZkIDEwMCUpOw0KICBiYWNrZ3JvdW5kLWltYWdlOiAtbXMtbGluZWFyLWdyYWRpZW50KGJvdHRvbSwgI2JlZTJmZiAxNSUsICM5NWMyZmQgMTAwJSk7DQogIGJhY2tncm91bmQtaW1hZ2U6IC1vLWxpbmVhci1ncmFkaWVudChib3R0b20sICNiZWUyZmYgMTUlLCAjOTVjMmZkIDEwMCUpOw0KICBiYWNrZ3JvdW5kLWltYWdlOiBsaW5lYXItZ3JhZGllbnQodG8gdG9wLCAjYmVlMmZmIDE1JSwgIzk1YzJmZCAxMDAlKTsNCiAgZmlsdGVyOiBwcm9naWQ6RFhJbWFnZVRyYW5zZm9ybS5NaWNyb3NvZnQuZ3JhZGllbnQoR3JhZGllbnRUeXBlPTAsc3RhcnRDb2xvcnN0cj0nIzk1YzJmZCcsIGVuZENvbG9yc3RyPScjYmVlMmZmJyk7DQoNCiAgYm9yZGVyOiBzb2xpZCAxcHggcmdiYSgwLCAwLCAwLCAwLjUpOw0KICAtd2Via2l0LWJvcmRlci1yYWRpdXM6IDIwcHg7DQogIC1tb3otYm9yZGVyLXJhZGl1czogMjBweDsNCiAgYm9yZGVyLXJhZGl1czogMjBweDsNCg0KICAtd2Via2l0LWJveC1zaGFkb3c6IGluc2V0IDAgOHB4IDVweCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNjUpLA0KICAgIDAgMXB4IDJweCByZ2JhKDAsIDAsIDAsIDAuMik7DQogIC1tb3otYm94LXNoYWRvdzogaW5zZXQgMCA4cHggNXB4IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC42NSksDQogICAgMCAxcHggMnB4IHJnYmEoMCwgMCwgMCwgMC4yKTsNCiAgYm94LXNoYWRvdzogaW5zZXQgMCA4cHggNXB4IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC42NSksDQogICAgMCAxcHggMnB4IHJnYmEoMCwgMCwgMCwgMC4yKTsNCiAgbWFyZ2luLWJvdHRvbTogMjBweDsNCiAgcGFkZGluZzogNnB4IDIwcHg7DQogIGNvbG9yOiAjMDAwOw0KICB0ZXh0LXNoYWRvdzogMCAxcHggMXB4IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC44KTsNCiAgd29yZC13cmFwOiBicmVhay13b3JkOw0KfQ0KDQouYWRkTWVzc2FnZSB7DQogIGRpc3BsYXk6IGJsb2NrOw0KICBwYWRkaW5nOiAwIDAgMTBweCAxMHB4Ow0KfQ0KYS5hZGRNZXNzYWdlOmxpbmssDQphLmFkZE1lc3NhZ2U6dmlzaXRlZCB7DQogIGNvbG9yOiBibHVlOw0KICB0ZXh0LWRlY29yYXRpb246IG5vbmU7DQp9DQphLmFkZE1lc3NhZ2U6aG92ZXIgew0KICB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTsNCn0NCg=="},{"version":3,"sources":["TopicDetails.vue"],"names":[],"mappings":";AA6IA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TopicDetails.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div class=\"topic-details\">\r\n    <h1>{{ activeTopic.title }}</h1>\r\n    <router-link\r\n      :to=\"{ name: 'AddMessage', params: { topicId: activeTopic.id } }\"\r\n      class=\"addMessage\"\r\n    >Add New Message</router-link>\r\n\r\n    <div\r\n      v-for=\"message in activeTopic.messages\"\r\n      v-bind:key=\"message.id\"\r\n      class=\"topic-message bubble\"\r\n    >\r\n      <h3 class=\"message-title\">{{ message.title }}</h3>\r\n      <p class=\"message-body\">{{ message.messageText }}</p>\r\n      <router-link\r\n        :to=\"{ name: 'EditMessage', params: { topicId: activeTopic.id, messageId: message.id } }\"\r\n        tag=\"button\"\r\n        class=\"btnEditMessage\"\r\n      >Edit</router-link>\r\n      <button class=\"btnDeleteMessage\" @click=\"confirmAndDeleteMessage(message.id)\">Delete</button>\r\n    </div>\r\n\r\n    <div v-if=\"!activeTopic.id\">\r\n      <p>Loading topic or topic not found...</p>\r\n    </div>\r\n    <div v-else-if=\"activeTopic.messages && activeTopic.messages.length === 0\">\r\n      <p>No messages for this topic yet. Be the first to add one!</p>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState, mapActions } from 'vuex';\r\n\r\nexport default {\r\n  name: \"topic-details\", // This component's name\r\n  props: {\r\n    topicId: [Number, String] // Ensure this prop is being received\r\n  },\r\n  computed: {\r\n    ...mapState(['activeTopic', 'topics']) // activeTopic and allTopics from store\r\n  },\r\n  methods: {\r\n    ...mapActions(['selectTopic', 'deleteMessage']), // Actions to interact with store\r\n\r\n    confirmAndDeleteMessage(id) {\r\n      console.log('Attempting to delete message with ID:', id); // Log for delete action\r\n      if (confirm(\"Are you sure you want to delete this message?\")) {\r\n        this.deleteMessage(id);\r\n      }\r\n    }\r\n  },\r\n  // Use a watcher to react to changes in topicId from the route\r\n  // and also to handle the initial load.\r\n  watch: {\r\n    topicId: {\r\n      immediate: true, // This makes the watcher run immediately when the component is created\r\n      handler(newTopicId) {\r\n        console.log('--- Watcher: topicId handler initiated ---');\r\n        console.log('1. Current topicId prop:', newTopicId);\r\n        console.log('2. Current state.topics (from mapState):', this.topics); // Crucial: Is this populated?\r\n\r\n        // Check if newTopicId is valid AND topics array is populated\r\n        if (newTopicId && this.topics && this.topics.length > 0) {\r\n          const topicToSelect = this.topics.find(t => t.id == newTopicId); // Use == for loose comparison as route param might be string\r\n          console.log('3. Found topic to select (after find):', topicToSelect);\r\n\r\n          if (topicToSelect) {\r\n            console.log('4. Dispatching selectTopic action with:', topicToSelect);\r\n            this.selectTopic(topicToSelect); // Dispatch action to set activeTopic\r\n          } else {\r\n            console.warn(`5. Topic with ID ${newTopicId} NOT found in store's topics array.`);\r\n            // This is where your \"Topic not found\" message logic originates\r\n          }\r\n        } else if (newTopicId && (!this.topics || this.topics.length === 0)) {\r\n          console.warn(`6. topicId (${newTopicId}) is present, but state.topics is empty or not yet loaded.`);\r\n          console.warn('   This indicates either an empty store or a timing issue.');\r\n        } else {\r\n          console.log('7. topicId is null or undefined on initial load, or topics is empty and topicId is null.');\r\n        }\r\n        console.log('--- Watcher: topicId handler finished ---');\r\n      }\r\n    },\r\n    // Add a watcher for 'topics' state as well. This handles cases where 'topics' might\r\n    // be populated slightly after 'topicId' is available (e.g., if initialData load is delayed, though unlikely for static JSON)\r\n    topics: {\r\n      immediate: true,\r\n      handler(newTopics) {\r\n        console.log('--- Watcher: topics handler initiated ---');\r\n        console.log('8. topics array updated:', newTopics); // Crucial: What does this array contain?\r\n        console.log('9. Current topicId prop:', this.topicId);\r\n\r\n        if (newTopics && newTopics.length > 0 && this.topicId) {\r\n          const topicToSelect = newTopics.find(t => t.id == this.topicId);\r\n          console.log('10. Found topic to select (from topics watcher):', topicToSelect);\r\n\r\n          // Only select if it's a different topic than currently active to avoid unnecessary re-renders\r\n          if (topicToSelect && (!this.activeTopic || this.activeTopic.id !== topicToSelect.id)) {\r\n            console.log('11. Dispatching selectTopic from topics watcher with:', topicToSelect);\r\n            this.selectTopic(topicToSelect);\r\n          } else if (!topicToSelect) {\r\n             console.warn(`12. In topics watcher: Topic with ID ${this.topicId} NOT found in newly updated topics array.`);\r\n          } else {\r\n             console.log('13. Topics watcher: Topic already active or no change needed.');\r\n          }\r\n        } else {\r\n            console.log('14. Topics watcher: New topics array is empty, or topicId is missing.');\r\n        }\r\n        console.log('--- Watcher: topics handler finished ---');\r\n      }\r\n    },\r\n    // Add a watcher for activeTopic to see when it changes\r\n    activeTopic: {\r\n      handler(newActiveTopic) {\r\n        console.log('--- Watcher: activeTopic handler initiated ---');\r\n        console.log('15. activeTopic updated to:', newActiveTopic);\r\n        console.log('--- Watcher: activeTopic handler finished ---');\r\n      },\r\n      deep: true // Watch for changes inside the object\r\n    }\r\n  },\r\n  created() {\r\n    console.log('--- Component Created Hook ---');\r\n    console.log('16. Messages (TopicDetails) component created.');\r\n    console.log('17. Initial topicId prop:', this.topicId);\r\n    console.log('18. Initial state.topics at created:', this.topics);\r\n    console.log('19. Initial state.activeTopic at created:', this.activeTopic);\r\n    console.log('--- Created Hook Finished ---');\r\n  },\r\n  mounted() {\r\n    console.log('--- Component Mounted Hook ---');\r\n    console.log('20. Messages (TopicDetails) component mounted.');\r\n    console.log('21. State.topics at mounted:', this.topics);\r\n    console.log('22. ActiveTopic at mounted:', this.activeTopic);\r\n    console.log('--- Mounted Hook Finished ---');\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n/* Your existing styles (no changes needed here) */\r\n/** page structure **/\r\n.topic-details {\r\n  padding: 20px 20px;\r\n  margin: 0 auto;\r\n  max-width: 600px;\r\n}\r\n\r\n/** ios1-ios6 bubbles **/\r\n.topic-details .bubble {\r\n  box-sizing: border-box;\r\n  width: auto;\r\n  position: relative;\r\n  clear: both;\r\n\r\n  background: #95c2fd;\r\n  background-image: -webkit-gradient(\r\n    linear,\r\n    left bottom,\r\n    left top,\r\n    color-stop(0.15, #bee2ff),\r\n    color-stop(1, #95c2fd)\r\n  );\r\n  background-image: -webkit-linear-gradient(bottom, #bee2ff 15%, #95c2fd 100%);\r\n  background-image: -moz-linear-gradient(bottom, #bee2ff 15%, #95c2fd 100%);\r\n  background-image: -ms-linear-gradient(bottom, #bee2ff 15%, #95c2fd 100%);\r\n  background-image: -o-linear-gradient(bottom, #bee2ff 15%, #95c2fd 100%);\r\n  background-image: linear-gradient(to top, #bee2ff 15%, #95c2fd 100%);\r\n  filter: progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr='#95c2fd', endColorstr='#bee2ff');\r\n\r\n  border: solid 1px rgba(0, 0, 0, 0.5);\r\n  -webkit-border-radius: 20px;\r\n  -moz-border-radius: 20px;\r\n  border-radius: 20px;\r\n\r\n  -webkit-box-shadow: inset 0 8px 5px rgba(255, 255, 255, 0.65),\r\n    0 1px 2px rgba(0, 0, 0, 0.2);\r\n  -moz-box-shadow: inset 0 8px 5px rgba(255, 255, 255, 0.65),\r\n    0 1px 2px rgba(0, 0, 0, 0.2);\r\n  box-shadow: inset 0 8px 5px rgba(255, 255, 255, 0.65),\r\n    0 1px 2px rgba(0, 0, 0, 0.2);\r\n  margin-bottom: 20px;\r\n  padding: 6px 20px;\r\n  color: #000;\r\n  text-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);\r\n  word-wrap: break-word;\r\n}\r\n\r\n.addMessage {\r\n  display: block;\r\n  padding: 0 0 10px 10px;\r\n}\r\na.addMessage:link,\r\na.addMessage:visited {\r\n  color: blue;\r\n  text-decoration: none;\r\n}\r\na.addMessage:hover {\r\n  text-decoration: underline;\r\n}\r\n</style>"]}]}